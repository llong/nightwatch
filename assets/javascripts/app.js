!function(e,t){"use strict";"function"==typeof define&&define.amd?define(["angular"],t):e.hasOwnProperty("angular")?t(e.angular):"object"==typeof exports&&(module.exports=t(require("angular")))}(this,function(e){"use strict";function t(e,t){var o;try{o=e[t]}catch(r){o=!1}if(o){var n="__"+Math.round(1e7*Math.random());try{e[t].setItem(n,n),e[t].removeItem(n,n)}catch(r){o=!1}}return o}function o(o){var r=t(window,o);return function(){var n="ngStorage-";this.setKeyPrefix=function(e){if("string"!=typeof e)throw new TypeError("[ngStorage] - "+o+"Provider.setKeyPrefix() expects a String.");n=e};var a=e.toJson,s=e.fromJson;this.setSerializer=function(e){if("function"!=typeof e)throw new TypeError("[ngStorage] - "+o+"Provider.setSerializer expects a function.");a=e},this.setDeserializer=function(e){if("function"!=typeof e)throw new TypeError("[ngStorage] - "+o+"Provider.setDeserializer expects a function.");s=e},this.supported=function(){return!!r},this.get=function(e){return r&&s(r.getItem(n+e))},this.set=function(e,t){return r&&r.setItem(n+e,a(t))},this.remove=function(e){r&&r.removeItem(n+e)},this.$get=["$rootScope","$window","$log","$timeout","$document",function(r,i,l,c,u){var p,d,g=n.length,f=t(i,o),m=f||(l.warn("This browser does not support Web Storage!"),{setItem:e.noop,getItem:e.noop,removeItem:e.noop}),h={$default:function(t){for(var o in t)e.isDefined(h[o])||(h[o]=e.copy(t[o]));return h.$sync(),h},$reset:function(e){for(var t in h)"$"===t[0]||delete h[t]&&m.removeItem(n+t);return h.$default(e)},$sync:function(){for(var e,t=0,o=m.length;o>t;t++)(e=m.key(t))&&n===e.slice(0,g)&&(h[e.slice(g)]=s(m.getItem(e)))},$apply:function(){var t;if(d=null,!e.equals(h,p)){t=e.copy(p),e.forEach(h,function(o,r){e.isDefined(o)&&"$"!==r[0]&&(m.setItem(n+r,a(o)),delete t[r])});for(var o in t)m.removeItem(n+o);p=e.copy(h)}},$supported:function(){return!!f}};return h.$sync(),p=e.copy(h),r.$watch(function(){d||(d=c(h.$apply,100,!1))}),i.addEventListener&&i.addEventListener("storage",function(t){if(t.key){var o=u[0];o.hasFocus&&o.hasFocus()||n!==t.key.slice(0,g)||(t.newValue?h[t.key.slice(g)]=s(t.newValue):delete h[t.key.slice(g)],p=e.copy(h),r.$apply())}}),i.addEventListener&&i.addEventListener("beforeunload",function(){h.$apply()}),h}]}}return e=e&&e.module?e:window.angular,e.module("ngStorage",[]).provider("$localStorage",o("localStorage")).provider("$sessionStorage",o("sessionStorage"))});var app=angular.module("app",["ngRoute","ngStorage"]);app.config(["$routeProvider","$locationProvider",function(e,t){e.when("/login",{templateUrl:"/assets/partials/login.html",controller:"loginController"}).when("/register",{templateUrl:"/assets/partials/register.html",controller:"registerController"}).when("/create-name-password",{templateUrl:"/assets/partials/create-name-password.html"}).when("/add-phone",{templateUrl:"/assets/partials/add-phone.html"}).when("/primary-address",{templateUrl:"/assets/partials/primary-address.html"}).when("/billing-address",{templateUrl:"/assets/partials/billing-address.html"}).when("/create-subaccount",{templateUrl:"/assets/partials/create-subaccount.html"}).when("/create-group",{templateUrl:"/assets/partials/create-group.html"}).when("/add-device",{templateUrl:"/assets/partials/add-device.html",controller:"deviceController"}).when("/add-horse",{templateUrl:"/assets/partials/add-horse.html",controller:"horseController"}).when("/notification-settings",{templateUrl:"/assets/partials/notification-settings.html"}).otherwise({redirectTo:"/login"})}]),app.run(["$http","$localStorage",function(e,t){e.defaults.headers.common.Authorization="Bearer "+t.token.access_token,e.defaults.headers.common.Accept="application/json;odata=verbose"}]),app.factory("authenticate",function(){var e="https://portaldev.nightwatch24.com:44433/";return e}),app.controller("deviceController",["$scope","$http","$localStorage","$location","authenticate",function(e,t,o,r,n){var a=n;e.addDevice=function(){t.post(a+"api/device",{serialNumber:e.serialNumber,nickName:e.nickName}).then(function(t){e.devices=t,console.log(t),e.serialNumber="",e.nickName=""},function(e){console.log(e)})}}]),app.controller("groupController",["$scope",function(e){e.group=!1,e.groups=[],e.assignGroupLink="",e.assignGroup=function(){e.group?(e.group=!1,this.innerHTML="Don't Assign Address To Group"):(e.group=!0,this.innerHTML="Don't Assign Address To Group")},e.addGroup=function(){e.groups.push({groupName:e.groupName,address:e.address,address2:e.address2,city:e.city,state:e.state,country:e.country}),e.groupName="",e.address="",e.address2="",e.city="",e.state="",e.country="",e.group=!1}}]),app.controller("horseController",["$scope","$http","$localStorage","$location","authenticate",function(e,t,o,r,n){var a=n;e.addHorse=function(){t.post(a+"api/horse",{registeredName:e.registeredName,nickName:e.nickName,sex:e.sex,breed:e.breed}).then(function(t){e.horses=t,console.log(t),e.horseForm=null},function(e){console.log(e)})}}]),app.controller("loginController",["$scope","$http","$localStorage","$location","authenticate",function(e,t,o,r,n){var a=n;e.login=function(){t.post(a+"api/login",{username:e.username,password:e.password}).then(function(t,n){e.userData=t.data,o.token=t.data,r.path("/add-phone"),console.log(t)},function(t){e.message=!0})}}]),app.controller("mainController",["$scope","$http","$localStorage","$location","authenticate",function(e,t,o,r,n){var a=n;e.getData=function(){t.get(a+"api/account",{}).then(function(t){e.userData=t.data,console.log(e.userData)})}}]),app.controller("registerController",["$scope","$http","authenticate",function(e,t,o){var r=o;e.register=function(o,n){e.password===e.password2&&t.post(r+"account/register",{username:e.username,email:e.email,salutation:e.salutation,firstName:e.firstName,lastName:e.lastName,password:e.password}).then(function(e){console.log(e)},function(e){console.log(e)})}}]),app.controller("userController",["$scope",function(e){e.showUserForm=function(){e.skipButton=!1,e.AddUserForm=!0,console.log("click")}}]);