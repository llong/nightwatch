!function(root,factory){"use strict";"function"==typeof define&&define.amd?define(["angular"],factory):root.hasOwnProperty("angular")?factory(root.angular):"object"==typeof exports&&(module.exports=factory(require("angular")))}(this,function(angular){"use strict";function isStorageSupported($window,storageType){var supported;try{supported=$window[storageType]}catch(err){supported=!1}if(supported){var key="__"+Math.round(1e7*Math.random());try{$window[storageType].setItem(key,key),$window[storageType].removeItem(key,key)}catch(err){supported=!1}}return supported}function _storageProvider(storageType){var providerWebStorage=isStorageSupported(window,storageType);return function(){var storageKeyPrefix="ngStorage-";this.setKeyPrefix=function(prefix){if("string"!=typeof prefix)throw new TypeError("[ngStorage] - "+storageType+"Provider.setKeyPrefix() expects a String.");storageKeyPrefix=prefix};var serializer=angular.toJson,deserializer=angular.fromJson;this.setSerializer=function(s){if("function"!=typeof s)throw new TypeError("[ngStorage] - "+storageType+"Provider.setSerializer expects a function.");serializer=s},this.setDeserializer=function(d){if("function"!=typeof d)throw new TypeError("[ngStorage] - "+storageType+"Provider.setDeserializer expects a function.");deserializer=d},this.supported=function(){return!!providerWebStorage},this.get=function(key){return providerWebStorage&&deserializer(providerWebStorage.getItem(storageKeyPrefix+key))},this.set=function(key,value){return providerWebStorage&&providerWebStorage.setItem(storageKeyPrefix+key,serializer(value))},this.remove=function(key){providerWebStorage&&providerWebStorage.removeItem(storageKeyPrefix+key)},this.$get=["$rootScope","$window","$log","$timeout","$document",function($rootScope,$window,$log,$timeout,$document){var _last$storage,_debounce,prefixLength=storageKeyPrefix.length,isSupported=isStorageSupported($window,storageType),webStorage=isSupported||($log.warn("This browser does not support Web Storage!"),{setItem:angular.noop,getItem:angular.noop,removeItem:angular.noop}),$storage={$default:function(items){for(var k in items)angular.isDefined($storage[k])||($storage[k]=angular.copy(items[k]));return $storage.$sync(),$storage},$reset:function(items){for(var k in $storage)"$"===k[0]||delete $storage[k]&&webStorage.removeItem(storageKeyPrefix+k);return $storage.$default(items)},$sync:function(){for(var k,i=0,l=webStorage.length;l>i;i++)(k=webStorage.key(i))&&storageKeyPrefix===k.slice(0,prefixLength)&&($storage[k.slice(prefixLength)]=deserializer(webStorage.getItem(k)))},$apply:function(){var temp$storage;if(_debounce=null,!angular.equals($storage,_last$storage)){temp$storage=angular.copy(_last$storage),angular.forEach($storage,function(v,k){angular.isDefined(v)&&"$"!==k[0]&&(webStorage.setItem(storageKeyPrefix+k,serializer(v)),delete temp$storage[k])});for(var k in temp$storage)webStorage.removeItem(storageKeyPrefix+k);_last$storage=angular.copy($storage)}},$supported:function(){return!!isSupported}};return $storage.$sync(),_last$storage=angular.copy($storage),$rootScope.$watch(function(){_debounce||(_debounce=$timeout($storage.$apply,100,!1))}),$window.addEventListener&&$window.addEventListener("storage",function(event){if(event.key){var doc=$document[0];doc.hasFocus&&doc.hasFocus()||storageKeyPrefix!==event.key.slice(0,prefixLength)||(event.newValue?$storage[event.key.slice(prefixLength)]=deserializer(event.newValue):delete $storage[event.key.slice(prefixLength)],_last$storage=angular.copy($storage),$rootScope.$apply())}}),$window.addEventListener&&$window.addEventListener("beforeunload",function(){$storage.$apply()}),$storage}]}}return angular=angular&&angular.module?angular:window.angular,angular.module("ngStorage",[]).provider("$localStorage",_storageProvider("localStorage")).provider("$sessionStorage",_storageProvider("sessionStorage"))}),"undefined"!=typeof module&&"undefined"!=typeof exports&&module.exports===exports&&(module.exports="satellizer"),function(window,angular,undefined){"use strict";window.location.origin||(window.location.origin=window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"")),angular.module("satellizer",[]).constant("SatellizerConfig",{httpInterceptor:function(){return!0},withCredentials:!1,tokenRoot:null,baseUrl:"/",loginUrl:"/auth/login",signupUrl:"/auth/signup",unlinkUrl:"/auth/unlink",tokenName:"token",tokenPrefix:"satellizer",authHeader:"Authorization",authToken:"Bearer",storageType:"localStorage",providers:{facebook:{name:"facebook",url:"/auth/facebook",authorizationEndpoint:"https://www.facebook.com/v2.5/dialog/oauth",redirectUri:window.location.origin+"/",requiredUrlParams:["display","scope"],scope:["email"],scopeDelimiter:",",display:"popup",oauthType:"2.0",popupOptions:{width:580,height:400}},google:{name:"google",url:"/auth/google",authorizationEndpoint:"https://accounts.google.com/o/oauth2/auth",redirectUri:window.location.origin,requiredUrlParams:["scope"],optionalUrlParams:["display","state"],scope:["profile","email"],scopePrefix:"openid",scopeDelimiter:" ",display:"popup",oauthType:"2.0",popupOptions:{width:452,height:633},state:function(){var rand=Math.random().toString(36).substr(2);return encodeURIComponent(rand)}},github:{name:"github",url:"/auth/github",authorizationEndpoint:"https://github.com/login/oauth/authorize",redirectUri:window.location.origin,optionalUrlParams:["scope"],scope:["user:email"],scopeDelimiter:" ",oauthType:"2.0",popupOptions:{width:1020,height:618}},instagram:{name:"instagram",url:"/auth/instagram",authorizationEndpoint:"https://api.instagram.com/oauth/authorize",redirectUri:window.location.origin,requiredUrlParams:["scope"],scope:["basic"],scopeDelimiter:"+",oauthType:"2.0"},linkedin:{name:"linkedin",url:"/auth/linkedin",authorizationEndpoint:"https://www.linkedin.com/uas/oauth2/authorization",redirectUri:window.location.origin,requiredUrlParams:["state"],scope:["r_emailaddress"],scopeDelimiter:" ",state:"STATE",oauthType:"2.0",popupOptions:{width:527,height:582}},twitter:{name:"twitter",url:"/auth/twitter",authorizationEndpoint:"https://api.twitter.com/oauth/authenticate",redirectUri:window.location.origin,oauthType:"1.0",popupOptions:{width:495,height:645}},twitch:{name:"twitch",url:"/auth/twitch",authorizationEndpoint:"https://api.twitch.tv/kraken/oauth2/authorize",redirectUri:window.location.origin,requiredUrlParams:["scope"],scope:["user_read"],scopeDelimiter:" ",display:"popup",oauthType:"2.0",popupOptions:{width:500,height:560}},live:{name:"live",url:"/auth/live",authorizationEndpoint:"https://login.live.com/oauth20_authorize.srf",redirectUri:window.location.origin,requiredUrlParams:["display","scope"],scope:["wl.emails"],scopeDelimiter:" ",display:"popup",oauthType:"2.0",popupOptions:{width:500,height:560}},yahoo:{name:"yahoo",url:"/auth/yahoo",authorizationEndpoint:"https://api.login.yahoo.com/oauth2/request_auth",redirectUri:window.location.origin,scope:[],scopeDelimiter:",",oauthType:"2.0",popupOptions:{width:559,height:519}},bitbucket:{name:"bitbucket",url:"/auth/bitbucket",authorizationEndpoint:"https://bitbucket.org/site/oauth2/authorize",redirectUri:window.location.origin+"/",requiredUrlParams:["scope"],scope:["email"],scopeDelimiter:" ",oauthType:"2.0",popupOptions:{width:1028,height:529}}}}).provider("$auth",["SatellizerConfig",function(config){Object.defineProperties(this,{httpInterceptor:{get:function(){return config.httpInterceptor},set:function(value){"function"==typeof value?config.httpInterceptor=value:config.httpInterceptor=function(){return value}}},baseUrl:{get:function(){return config.baseUrl},set:function(value){config.baseUrl=value}},loginUrl:{get:function(){return config.loginUrl},set:function(value){config.loginUrl=value}},signupUrl:{get:function(){return config.signupUrl},set:function(value){config.signupUrl=value}},tokenRoot:{get:function(){return config.tokenRoot},set:function(value){config.tokenRoot=value}},tokenName:{get:function(){return config.tokenName},set:function(value){config.tokenName=value}},tokenPrefix:{get:function(){return config.tokenPrefix},set:function(value){config.tokenPrefix=value}},unlinkUrl:{get:function(){return config.unlinkUrl},set:function(value){config.unlinkUrl=value}},authHeader:{get:function(){return config.authHeader},set:function(value){config.authHeader=value}},authToken:{get:function(){return config.authToken},set:function(value){config.authToken=value}},withCredentials:{get:function(){return config.withCredentials},set:function(value){config.withCredentials=value}},storageType:{get:function(){return config.storageType},set:function(value){config.storageType=value}}}),angular.forEach(Object.keys(config.providers),function(provider){this[provider]=function(params){return angular.extend(config.providers[provider],params)}},this);var oauth=function(params){config.providers[params.name]=config.providers[params.name]||{},angular.extend(config.providers[params.name],params)};this.oauth1=function(params){oauth(params),config.providers[params.name].oauthType="1.0"},this.oauth2=function(params){oauth(params),config.providers[params.name].oauthType="2.0"},this.$get=["$q","SatellizerShared","SatellizerLocal","SatellizerOauth",function($q,shared,local,oauth){var $auth={};return $auth.login=function(user,opts){return local.login(user,opts)},$auth.signup=function(user,options){return local.signup(user,options)},$auth.logout=function(){return shared.logout()},$auth.authenticate=function(name,userData){return oauth.authenticate(name,userData)},$auth.link=function(name,userData){return oauth.authenticate(name,userData)},$auth.unlink=function(provider,opts){return oauth.unlink(provider,opts)},$auth.isAuthenticated=function(){return shared.isAuthenticated()},$auth.getToken=function(){return shared.getToken()},$auth.setToken=function(token){shared.setToken({access_token:token})},$auth.removeToken=function(){return shared.removeToken()},$auth.getPayload=function(){return shared.getPayload()},$auth.setStorageType=function(type){return shared.setStorageType(type)},$auth}]}]).factory("SatellizerShared",["$q","$window","$log","SatellizerConfig","SatellizerStorage",function($q,$window,$log,config,storage){var Shared={},tokenName=config.tokenPrefix?[config.tokenPrefix,config.tokenName].join("_"):config.tokenName;return Shared.getToken=function(){return storage.get(tokenName)},Shared.getPayload=function(){var token=storage.get(tokenName);if(token&&3===token.split(".").length)try{var base64Url=token.split(".")[1],base64=base64Url.replace(/-/g,"+").replace(/_/g,"/");return JSON.parse(decodeURIComponent(escape(window.atob(base64))))}catch(e){return undefined}},Shared.setToken=function(response){if(!response)return $log.warn("Can't set token without passing a value");var token,accessToken=response&&response.access_token;if(accessToken&&(angular.isObject(accessToken)&&angular.isObject(accessToken.data)?response=accessToken:angular.isString(accessToken)&&(token=accessToken)),!token&&response){var tokenRootData=config.tokenRoot&&config.tokenRoot.split(".").reduce(function(o,x){return o[x]},response.data);token=tokenRootData?tokenRootData[config.tokenName]:response.data&&response.data[config.tokenName]}if(!token){var tokenPath=config.tokenRoot?config.tokenRoot+"."+config.tokenName:config.tokenName;return $log.warn('Expecting a token named "'+tokenPath)}storage.set(tokenName,token)},Shared.removeToken=function(){storage.remove(tokenName)},Shared.isAuthenticated=function(){var token=storage.get(tokenName);if(token){if(3===token.split(".").length)try{var base64Url=token.split(".")[1],base64=base64Url.replace(/-/g,"+").replace(/_/g,"/"),exp=JSON.parse($window.atob(base64)).exp;if(exp){var isExpired=Math.round((new Date).getTime()/1e3)>=exp;return!isExpired}}catch(e){return!0}return!0}return!1},Shared.logout=function(){return storage.remove(tokenName),$q.when()},Shared.setStorageType=function(type){config.storageType=type},Shared}]).factory("SatellizerOauth",["$q","$http","SatellizerConfig","SatellizerUtils","SatellizerShared","SatellizerOauth1","SatellizerOauth2",function($q,$http,config,utils,shared,Oauth1,Oauth2){var Oauth={};return Oauth.authenticate=function(name,userData){var provider="1.0"===config.providers[name].oauthType?new Oauth1:new Oauth2,deferred=$q.defer();return provider.open(config.providers[name],userData||{}).then(function(response){config.providers[name].url&&shared.setToken(response,!1),deferred.resolve(response)})["catch"](function(error){deferred.reject(error)}),deferred.promise},Oauth.unlink=function(provider,opts){return opts=opts||{},opts.url=opts.url?opts.url:utils.joinUrl(config.baseUrl,config.unlinkUrl),opts.data={provider:provider}||opts.data,opts.method=opts.method||"POST",opts.withCredentials=opts.withCredentials||config.withCredentials,$http(opts)},Oauth}]).factory("SatellizerLocal",["$http","SatellizerUtils","SatellizerShared","SatellizerConfig",function($http,utils,shared,config){var Local={};return Local.login=function(user,opts){return opts=opts||{},opts.url=opts.url?opts.url:utils.joinUrl(config.baseUrl,config.loginUrl),opts.data=user||opts.data,opts.method=opts.method||"POST",opts.withCredentials=opts.withCredentials||config.withCredentials,$http(opts).then(function(response){return shared.setToken(response),response})},Local.signup=function(user,opts){return opts=opts||{},opts.url=opts.url?opts.url:utils.joinUrl(config.baseUrl,config.signupUrl),opts.data=user||opts.data,opts.method=opts.method||"POST",opts.withCredentials=opts.withCredentials||config.withCredentials,$http(opts)},Local}]).factory("SatellizerOauth2",["$q","$http","$window","$timeout","SatellizerPopup","SatellizerUtils","SatellizerConfig","SatellizerStorage",function($q,$http,$window,$timeout,popup,utils,config,storage){return function(){var Oauth2={},defaults={defaultUrlParams:["response_type","client_id","redirect_uri"],responseType:"code",responseParams:{code:"code",clientId:"clientId",redirectUri:"redirectUri"}};return Oauth2.open=function(options,userData){defaults=utils.merge(options,defaults);var defer=$q.defer();return $timeout(function(){var url,openPopup,stateName=defaults.name+"_state";angular.isFunction(defaults.state)?storage.set(stateName,defaults.state()):angular.isString(defaults.state)&&storage.set(stateName,defaults.state),url=[defaults.authorizationEndpoint,Oauth2.buildQueryString()].join("?"),openPopup=window.cordova?popup.open(url,defaults.name,defaults.popupOptions,defaults.redirectUri).eventListener(defaults.redirectUri):popup.open(url,defaults.name,defaults.popupOptions,defaults.redirectUri).pollPopup(defaults.redirectUri),openPopup.then(function(oauthData){return"token"!==defaults.responseType&&defaults.url?oauthData.state&&oauthData.state!==storage.get(stateName)?defer.reject("The value returned in the state parameter does not match the state value from your original authorization code request."):void defer.resolve(Oauth2.exchangeForToken(oauthData,userData)):defer.resolve(oauthData)},function(err){defer.reject(err)})}),defer.promise},Oauth2.exchangeForToken=function(oauthData,userData){var data=angular.extend({},userData);angular.forEach(defaults.responseParams,function(value,key){switch(key){case"code":data[value]=oauthData.code;break;case"clientId":data[value]=defaults.clientId;break;case"redirectUri":data[value]=defaults.redirectUri;break;default:data[value]=oauthData[key]}}),oauthData.state&&(data.state=oauthData.state);var exchangeForTokenUrl=config.baseUrl?utils.joinUrl(config.baseUrl,defaults.url):defaults.url;return $http.post(exchangeForTokenUrl,data,{withCredentials:config.withCredentials})},Oauth2.buildQueryString=function(){var keyValuePairs=[],urlParamsCategories=["defaultUrlParams","requiredUrlParams","optionalUrlParams"];return angular.forEach(urlParamsCategories,function(paramsCategory){angular.forEach(defaults[paramsCategory],function(paramName){var camelizedName=utils.camelCase(paramName),paramValue=angular.isFunction(defaults[paramName])?defaults[paramName]():defaults[camelizedName];if("redirect_uri"!==paramName||paramValue){if("state"===paramName){var stateName=defaults.name+"_state";paramValue=storage.get(stateName)}"scope"===paramName&&Array.isArray(paramValue)&&(paramValue=paramValue.join(defaults.scopeDelimiter),defaults.scopePrefix&&(paramValue=[defaults.scopePrefix,paramValue].join(defaults.scopeDelimiter))),keyValuePairs.push([paramName,encodeURIComponent(paramValue)])}})}),keyValuePairs.map(function(pair){return pair.join("=")}).join("&")},Oauth2}}]).factory("SatellizerOauth1",["$q","$http","SatellizerPopup","SatellizerConfig","SatellizerUtils",function($q,$http,popup,config,utils){return function(){var Oauth1={},defaults={url:null,name:null,popupOptions:null,redirectUri:null,authorizationEndpoint:null};return Oauth1.open=function(options,userData){angular.extend(defaults,options);var popupWindow,serverUrl=config.baseUrl?utils.joinUrl(config.baseUrl,defaults.url):defaults.url;return window.cordova||(popupWindow=popup.open("",defaults.name,defaults.popupOptions,defaults.redirectUri)),$http.post(serverUrl,defaults).then(function(response){var url=[defaults.authorizationEndpoint,Oauth1.buildQueryString(response.data)].join("?");window.cordova?popupWindow=popup.open(url,defaults.name,defaults.popupOptions,defaults.redirectUri):popupWindow.popupWindow.location=url;var popupListener;return popupListener=window.cordova?popupWindow.eventListener(defaults.redirectUri):popupWindow.pollPopup(defaults.redirectUri),popupListener.then(function(response){return Oauth1.exchangeForToken(response,userData)})})},Oauth1.exchangeForToken=function(oauthData,userData){var data=angular.extend({},userData,oauthData),exchangeForTokenUrl=config.baseUrl?utils.joinUrl(config.baseUrl,defaults.url):defaults.url;return $http.post(exchangeForTokenUrl,data,{withCredentials:config.withCredentials})},Oauth1.buildQueryString=function(obj){var str=[];return angular.forEach(obj,function(value,key){str.push(encodeURIComponent(key)+"="+encodeURIComponent(value))}),str.join("&")},Oauth1}}]).factory("SatellizerPopup",["$q","$interval","$window","SatellizerConfig","SatellizerUtils",function($q,$interval,$window,config,utils){var Popup={};return Popup.url="",Popup.popupWindow=null,Popup.open=function(url,name,options){Popup.url=url;var stringifiedOptions=Popup.stringifyOptions(Popup.prepareOptions(options)),UA=$window.navigator.userAgent,windowName=window.cordova||UA.indexOf("CriOS")>-1?"_blank":name;return Popup.popupWindow=$window.open(url,windowName,stringifiedOptions),$window.popup=Popup.popupWindow,Popup.popupWindow&&Popup.popupWindow.focus&&Popup.popupWindow.focus(),Popup},Popup.eventListener=function(redirectUri){var deferred=$q.defer();return Popup.popupWindow.addEventListener("loadstart",function(event){if(0===event.url.indexOf(redirectUri)){var parser=document.createElement("a");if(parser.href=event.url,parser.search||parser.hash){var queryParams=parser.search.substring(1).replace(/\/$/,""),hashParams=parser.hash.substring(1).replace(/\/$/,""),hash=utils.parseQueryString(hashParams),qs=utils.parseQueryString(queryParams);angular.extend(qs,hash),qs.error||deferred.resolve(qs),Popup.popupWindow.close()}}}),Popup.popupWindow.addEventListener("loaderror",function(){deferred.reject("Authorization Failed")}),deferred.promise},Popup.pollPopup=function(redirectUri){var deferred=$q.defer(),redirectUriParser=document.createElement("a");redirectUriParser.href=redirectUri;var redirectUriPath=utils.getFullUrlPath(redirectUriParser),polling=$interval(function(){Popup.popupWindow&&!Popup.popupWindow.closed&&Popup.popupWindow.closed!==undefined||(deferred.reject("The popup window was closed."),$interval.cancel(polling));try{var popupWindowPath=utils.getFullUrlPath(Popup.popupWindow.location);if(popupWindowPath===redirectUriPath){if(Popup.popupWindow.location.search||Popup.popupWindow.location.hash){var queryParams=Popup.popupWindow.location.search.substring(1).replace(/\/$/,""),hashParams=Popup.popupWindow.location.hash.substring(1).replace(/[\/$]/,""),hash=utils.parseQueryString(hashParams),qs=utils.parseQueryString(queryParams);angular.extend(qs,hash),qs.error?deferred.reject(qs):deferred.resolve(qs)}else deferred.reject("Redirect has occurred but no query or hash parameters were found. They were either not set during the redirect, or were removed before Satellizer could read them, e.g. AngularJS routing mechanism.");$interval.cancel(polling),Popup.popupWindow.close()}}catch(error){}},20);return deferred.promise},Popup.prepareOptions=function(options){options=options||{};var width=options.width||500,height=options.height||500;return angular.extend({width:width,height:height,left:$window.screenX+($window.outerWidth-width)/2,top:$window.screenY+($window.outerHeight-height)/2.5},options)},Popup.stringifyOptions=function(options){var parts=[];return angular.forEach(options,function(value,key){parts.push(key+"="+value)}),parts.join(",")},Popup}]).service("SatellizerUtils",function(){this.getFullUrlPath=function(location){var isHttps="https:"===location.protocol;return location.protocol+"//"+location.hostname+":"+(location.port||(isHttps?"443":"80"))+(/^\//.test(location.pathname)?location.pathname:"/"+location.pathname)},this.camelCase=function(name){return name.replace(/([\:\-\_]+(.))/g,function(_,separator,letter,offset){return offset?letter.toUpperCase():letter})},this.parseQueryString=function(keyValue){var key,value,obj={};return angular.forEach((keyValue||"").split("&"),function(keyValue){keyValue&&(value=keyValue.split("="),key=decodeURIComponent(value[0]),obj[key]=angular.isDefined(value[1])?decodeURIComponent(value[1]):!0)}),obj},this.joinUrl=function(baseUrl,url){if(/^(?:[a-z]+:)?\/\//i.test(url))return url;var joined=[baseUrl,url].join("/"),normalize=function(str){return str.replace(/[\/]+/g,"/").replace(/\/\?/g,"?").replace(/\/\#/g,"#").replace(/\:\//g,"://")};return normalize(joined)},this.merge=function(obj1,obj2){var result={};for(var i in obj1)obj1.hasOwnProperty(i)&&(i in obj2&&"object"==typeof obj1[i]&&null!==i?result[i]=this.merge(obj1[i],obj2[i]):result[i]=obj1[i]);for(i in obj2)if(obj2.hasOwnProperty(i)){if(i in result)continue;result[i]=obj2[i]}return result}}).factory("SatellizerStorage",["$window","$log","SatellizerConfig",function($window,$log,config){var store={},isStorageAvailable=function(){try{var supported=config.storageType in $window&&null!==$window[config.storageType];if(supported){var key=Math.random().toString(36).substring(7);$window[config.storageType].setItem(key,""),$window[config.storageType].removeItem(key)}return supported}catch(e){return!1}}();return isStorageAvailable||$log.warn(config.storageType+" is not available."),{get:function(key){return isStorageAvailable?$window[config.storageType].getItem(key):store[key]},set:function(key,value){return isStorageAvailable?$window[config.storageType].setItem(key,value):store[key]=value},remove:function(key){return isStorageAvailable?$window[config.storageType].removeItem(key):delete store[key]}}}]).factory("SatellizerInterceptor",["$q","SatellizerConfig","SatellizerStorage","SatellizerShared",function($q,config,storage,shared){return{request:function(request){if(request.skipAuthorization)return request;if(shared.isAuthenticated()&&config.httpInterceptor(request)){var tokenName=config.tokenPrefix?config.tokenPrefix+"_"+config.tokenName:config.tokenName,token=storage.get(tokenName);config.authHeader&&config.authToken&&(token=config.authToken+" "+token),request.headers[config.authHeader]=token}return request},responseError:function(response){return $q.reject(response)}}}]).config(["$httpProvider",function($httpProvider){$httpProvider.interceptors.push("SatellizerInterceptor")}])}(window,window.angular),function(window,angular){"use strict";function assertArg(arg,name,reason){if(!arg)throw ngMinErr("areq","Argument '{0}' is {1}",name||"?",reason||"required");return arg}function mergeClasses(a,b){return a||b?a?b?(isArray(a)&&(a=a.join(" ")),isArray(b)&&(b=b.join(" ")),a+" "+b):a:b:""}function packageStyles(options){var styles={};return options&&(options.to||options.from)&&(styles.to=options.to,styles.from=options.from),styles}function pendClasses(classes,fix,isPrefix){var className="";return classes=isArray(classes)?classes:classes&&isString(classes)&&classes.length?classes.split(/\s+/):[],forEach(classes,function(klass,i){klass&&klass.length>0&&(className+=i>0?" ":"",className+=isPrefix?fix+klass:klass+fix)}),className}function removeFromArray(arr,val){var index=arr.indexOf(val);val>=0&&arr.splice(index,1)}function stripCommentsFromElement(element){if(element instanceof jqLite)switch(element.length){case 0:return element;case 1:if(element[0].nodeType===ELEMENT_NODE)return element;break;default:return jqLite(extractElementNode(element))}return element.nodeType===ELEMENT_NODE?jqLite(element):void 0}function extractElementNode(element){if(!element[0])return element;for(var i=0;i<element.length;i++){var elm=element[i];if(elm.nodeType==ELEMENT_NODE)return elm}}function $$addClass($$jqLite,element,className){forEach(element,function(elm){$$jqLite.addClass(elm,className)})}function $$removeClass($$jqLite,element,className){forEach(element,function(elm){$$jqLite.removeClass(elm,className)})}function applyAnimationClassesFactory($$jqLite){return function(element,options){options.addClass&&($$addClass($$jqLite,element,options.addClass),options.addClass=null),options.removeClass&&($$removeClass($$jqLite,element,options.removeClass),options.removeClass=null)}}function prepareAnimationOptions(options){if(options=options||{},!options.$$prepared){var domOperation=options.domOperation||noop;options.domOperation=function(){options.$$domOperationFired=!0,domOperation(),domOperation=noop},options.$$prepared=!0}return options}function applyAnimationStyles(element,options){applyAnimationFromStyles(element,options),applyAnimationToStyles(element,options)}function applyAnimationFromStyles(element,options){options.from&&(element.css(options.from),options.from=null)}function applyAnimationToStyles(element,options){options.to&&(element.css(options.to),options.to=null)}function mergeAnimationDetails(element,oldAnimation,newAnimation){var target=oldAnimation.options||{},newOptions=newAnimation.options||{},toAdd=(target.addClass||"")+" "+(newOptions.addClass||""),toRemove=(target.removeClass||"")+" "+(newOptions.removeClass||""),classes=resolveElementClasses(element.attr("class"),toAdd,toRemove);newOptions.preparationClasses&&(target.preparationClasses=concatWithSpace(newOptions.preparationClasses,target.preparationClasses),delete newOptions.preparationClasses);var realDomOperation=target.domOperation!==noop?target.domOperation:null;return extend(target,newOptions),realDomOperation&&(target.domOperation=realDomOperation),classes.addClass?target.addClass=classes.addClass:target.addClass=null,classes.removeClass?target.removeClass=classes.removeClass:target.removeClass=null,oldAnimation.addClass=target.addClass,oldAnimation.removeClass=target.removeClass,target}function resolveElementClasses(existing,toAdd,toRemove){function splitClassesToLookup(classes){isString(classes)&&(classes=classes.split(" "));var obj={};return forEach(classes,function(klass){klass.length&&(obj[klass]=!0)}),obj}var ADD_CLASS=1,REMOVE_CLASS=-1,flags={};existing=splitClassesToLookup(existing),toAdd=splitClassesToLookup(toAdd),forEach(toAdd,function(value,key){flags[key]=ADD_CLASS}),toRemove=splitClassesToLookup(toRemove),forEach(toRemove,function(value,key){flags[key]=flags[key]===ADD_CLASS?null:REMOVE_CLASS});var classes={addClass:"",removeClass:""};return forEach(flags,function(val,klass){var prop,allow;val===ADD_CLASS?(prop="addClass",allow=!existing[klass]):val===REMOVE_CLASS&&(prop="removeClass",allow=existing[klass]),allow&&(classes[prop].length&&(classes[prop]+=" "),classes[prop]+=klass)}),classes}function getDomNode(element){return element instanceof angular.element?element[0]:element}function applyGeneratedPreparationClasses(element,event,options){var classes="";event&&(classes=pendClasses(event,EVENT_CLASS_PREFIX,!0)),options.addClass&&(classes=concatWithSpace(classes,pendClasses(options.addClass,ADD_CLASS_SUFFIX))),options.removeClass&&(classes=concatWithSpace(classes,pendClasses(options.removeClass,REMOVE_CLASS_SUFFIX))),classes.length&&(options.preparationClasses=classes,element.addClass(classes))}function clearGeneratedClasses(element,options){options.preparationClasses&&(element.removeClass(options.preparationClasses),options.preparationClasses=null),options.activeClasses&&(element.removeClass(options.activeClasses),options.activeClasses=null)}function blockTransitions(node,duration){var value=duration?"-"+duration+"s":"";return applyInlineStyle(node,[TRANSITION_DELAY_PROP,value]),[TRANSITION_DELAY_PROP,value]}function blockKeyframeAnimations(node,applyBlock){var value=applyBlock?"paused":"",key=ANIMATION_PROP+ANIMATION_PLAYSTATE_KEY;return applyInlineStyle(node,[key,value]),[key,value]}function applyInlineStyle(node,styleTuple){var prop=styleTuple[0],value=styleTuple[1];node.style[prop]=value}function concatWithSpace(a,b){return a?b?a+" "+b:a:b}function getCssKeyframeDurationStyle(duration){return[ANIMATION_DURATION_PROP,duration+"s"]}function getCssDelayStyle(delay,isKeyframeAnimation){var prop=isKeyframeAnimation?ANIMATION_DELAY_PROP:TRANSITION_DELAY_PROP;return[prop,delay+"s"]}function computeCssStyles($window,element,properties){var styles=Object.create(null),detectedStyles=$window.getComputedStyle(element)||{};return forEach(properties,function(formalStyleName,actualStyleName){var val=detectedStyles[formalStyleName];if(val){var c=val.charAt(0);("-"===c||"+"===c||c>=0)&&(val=parseMaxTime(val)),0===val&&(val=null),styles[actualStyleName]=val}}),styles}function parseMaxTime(str){var maxValue=0,values=str.split(/\s*,\s*/);return forEach(values,function(value){"s"==value.charAt(value.length-1)&&(value=value.substring(0,value.length-1)),value=parseFloat(value)||0,maxValue=maxValue?Math.max(value,maxValue):value}),maxValue}function truthyTimingValue(val){return 0===val||null!=val}function getCssTransitionDurationStyle(duration,applyOnlyDuration){var style=TRANSITION_PROP,value=duration+"s";return applyOnlyDuration?style+=DURATION_KEY:value+=" linear all",[style,value]}function createLocalCacheLookup(){var cache=Object.create(null);return{flush:function(){cache=Object.create(null)},count:function(key){var entry=cache[key];return entry?entry.total:0},get:function(key){var entry=cache[key];return entry&&entry.value},put:function(key,value){cache[key]?cache[key].total++:cache[key]={total:1,value:value}}}}function registerRestorableStyles(backup,node,properties){forEach(properties,function(prop){backup[prop]=isDefined(backup[prop])?backup[prop]:node.style.getPropertyValue(prop)})}var TRANSITION_PROP,TRANSITIONEND_EVENT,ANIMATION_PROP,ANIMATIONEND_EVENT,noop=angular.noop,copy=angular.copy,extend=angular.extend,jqLite=angular.element,forEach=angular.forEach,isArray=angular.isArray,isString=angular.isString,isObject=angular.isObject,isUndefined=angular.isUndefined,isDefined=angular.isDefined,isFunction=angular.isFunction,isElement=angular.isElement,ELEMENT_NODE=1,ADD_CLASS_SUFFIX="-add",REMOVE_CLASS_SUFFIX="-remove",EVENT_CLASS_PREFIX="ng-",ACTIVE_CLASS_SUFFIX="-active",PREPARE_CLASS_SUFFIX="-prepare",NG_ANIMATE_CLASSNAME="ng-animate",NG_ANIMATE_CHILDREN_DATA="$$ngAnimateChildren",CSS_PREFIX="";isUndefined(window.ontransitionend)&&isDefined(window.onwebkittransitionend)?(CSS_PREFIX="-webkit-",TRANSITION_PROP="WebkitTransition",TRANSITIONEND_EVENT="webkitTransitionEnd transitionend"):(TRANSITION_PROP="transition",TRANSITIONEND_EVENT="transitionend"),isUndefined(window.onanimationend)&&isDefined(window.onwebkitanimationend)?(CSS_PREFIX="-webkit-",ANIMATION_PROP="WebkitAnimation",ANIMATIONEND_EVENT="webkitAnimationEnd animationend"):(ANIMATION_PROP="animation",ANIMATIONEND_EVENT="animationend");var DURATION_KEY="Duration",PROPERTY_KEY="Property",DELAY_KEY="Delay",TIMING_KEY="TimingFunction",ANIMATION_ITERATION_COUNT_KEY="IterationCount",ANIMATION_PLAYSTATE_KEY="PlayState",SAFE_FAST_FORWARD_DURATION_VALUE=9999,ANIMATION_DELAY_PROP=ANIMATION_PROP+DELAY_KEY,ANIMATION_DURATION_PROP=ANIMATION_PROP+DURATION_KEY,TRANSITION_DELAY_PROP=TRANSITION_PROP+DELAY_KEY,TRANSITION_DURATION_PROP=TRANSITION_PROP+DURATION_KEY,ngMinErr=angular.$$minErr("ng"),$$rAFSchedulerFactory=["$$rAF",function($$rAF){
function scheduler(tasks){queue=queue.concat(tasks),nextTick()}function nextTick(){if(queue.length){for(var items=queue.shift(),i=0;i<items.length;i++)items[i]();cancelFn||$$rAF(function(){cancelFn||nextTick()})}}var queue,cancelFn;return queue=scheduler.queue=[],scheduler.waitUntilQuiet=function(fn){cancelFn&&cancelFn(),cancelFn=$$rAF(function(){cancelFn=null,fn(),nextTick()})},scheduler}],$$AnimateChildrenDirective=["$interpolate",function($interpolate){return{link:function(scope,element,attrs){function setData(value){value="on"===value||"true"===value,element.data(NG_ANIMATE_CHILDREN_DATA,value)}var val=attrs.ngAnimateChildren;angular.isString(val)&&0===val.length?element.data(NG_ANIMATE_CHILDREN_DATA,!0):(setData($interpolate(val)(scope)),attrs.$observe("ngAnimateChildren",setData))}}}],ANIMATE_TIMER_KEY="$$animateCss",ONE_SECOND=1e3,ELAPSED_TIME_MAX_DECIMAL_PLACES=3,CLOSING_TIME_BUFFER=1.5,DETECT_CSS_PROPERTIES={transitionDuration:TRANSITION_DURATION_PROP,transitionDelay:TRANSITION_DELAY_PROP,transitionProperty:TRANSITION_PROP+PROPERTY_KEY,animationDuration:ANIMATION_DURATION_PROP,animationDelay:ANIMATION_DELAY_PROP,animationIterationCount:ANIMATION_PROP+ANIMATION_ITERATION_COUNT_KEY},DETECT_STAGGER_CSS_PROPERTIES={transitionDuration:TRANSITION_DURATION_PROP,transitionDelay:TRANSITION_DELAY_PROP,animationDuration:ANIMATION_DURATION_PROP,animationDelay:ANIMATION_DELAY_PROP},$AnimateCssProvider=["$animateProvider",function($animateProvider){var gcsLookup=createLocalCacheLookup(),gcsStaggerLookup=createLocalCacheLookup();this.$get=["$window","$$jqLite","$$AnimateRunner","$timeout","$$forceReflow","$sniffer","$$rAFScheduler","$$animateQueue",function($window,$$jqLite,$$AnimateRunner,$timeout,$$forceReflow,$sniffer,$$rAFScheduler,$$animateQueue){function gcsHashFn(node,extraClasses){var KEY="$$ngAnimateParentKey",parentNode=node.parentNode,parentID=parentNode[KEY]||(parentNode[KEY]=++parentCounter);return parentID+"-"+node.getAttribute("class")+"-"+extraClasses}function computeCachedCssStyles(node,className,cacheKey,properties){var timings=gcsLookup.get(cacheKey);return timings||(timings=computeCssStyles($window,node,properties),"infinite"===timings.animationIterationCount&&(timings.animationIterationCount=1)),gcsLookup.put(cacheKey,timings),timings}function computeCachedCssStaggerStyles(node,className,cacheKey,properties){var stagger;if(gcsLookup.count(cacheKey)>0&&(stagger=gcsStaggerLookup.get(cacheKey),!stagger)){var staggerClassName=pendClasses(className,"-stagger");$$jqLite.addClass(node,staggerClassName),stagger=computeCssStyles($window,node,properties),stagger.animationDuration=Math.max(stagger.animationDuration,0),stagger.transitionDuration=Math.max(stagger.transitionDuration,0),$$jqLite.removeClass(node,staggerClassName),gcsStaggerLookup.put(cacheKey,stagger)}return stagger||{}}function waitUntilQuiet(callback){rafWaitQueue.push(callback),$$rAFScheduler.waitUntilQuiet(function(){gcsLookup.flush(),gcsStaggerLookup.flush();for(var pageWidth=$$forceReflow(),i=0;i<rafWaitQueue.length;i++)rafWaitQueue[i](pageWidth);rafWaitQueue.length=0})}function computeTimings(node,className,cacheKey){var timings=computeCachedCssStyles(node,className,cacheKey,DETECT_CSS_PROPERTIES),aD=timings.animationDelay,tD=timings.transitionDelay;return timings.maxDelay=aD&&tD?Math.max(aD,tD):aD||tD,timings.maxDuration=Math.max(timings.animationDuration*timings.animationIterationCount,timings.transitionDuration),timings}var applyAnimationClasses=applyAnimationClassesFactory($$jqLite),parentCounter=0,rafWaitQueue=[];return function(element,initialOptions){function endFn(){close()}function cancelFn(){close(!0)}function close(rejected){if(!(animationClosed||animationCompleted&&animationPaused)){animationClosed=!0,animationPaused=!1,options.$$skipPreparationClasses||$$jqLite.removeClass(element,preparationClasses),$$jqLite.removeClass(element,activeClasses),blockKeyframeAnimations(node,!1),blockTransitions(node,!1),forEach(temporaryStyles,function(entry){node.style[entry[0]]=""}),applyAnimationClasses(element,options),applyAnimationStyles(element,options),Object.keys(restoreStyles).length&&forEach(restoreStyles,function(value,prop){value?node.style.setProperty(prop,value):node.style.removeProperty(prop)}),options.onDone&&options.onDone(),events&&events.length&&element.off(events.join(" "),onAnimationProgress);var animationTimerData=element.data(ANIMATE_TIMER_KEY);animationTimerData&&($timeout.cancel(animationTimerData[0].timer),element.removeData(ANIMATE_TIMER_KEY)),runner&&runner.complete(!rejected)}}function applyBlocking(duration){flags.blockTransition&&blockTransitions(node,duration),flags.blockKeyframeAnimation&&blockKeyframeAnimations(node,!!duration)}function closeAndReturnNoopAnimator(){return runner=new $$AnimateRunner({end:endFn,cancel:cancelFn}),waitUntilQuiet(noop),close(),{$$willAnimate:!1,start:function(){return runner},end:endFn}}function onAnimationProgress(event){event.stopPropagation();var ev=event.originalEvent||event,timeStamp=ev.$manualTimeStamp||Date.now(),elapsedTime=parseFloat(ev.elapsedTime.toFixed(ELAPSED_TIME_MAX_DECIMAL_PLACES));Math.max(timeStamp-startTime,0)>=maxDelayTime&&elapsedTime>=maxDuration&&(animationCompleted=!0,close())}function start(){function triggerAnimationStart(){if(!animationClosed){if(applyBlocking(!1),forEach(temporaryStyles,function(entry){var key=entry[0],value=entry[1];node.style[key]=value}),applyAnimationClasses(element,options),$$jqLite.addClass(element,activeClasses),flags.recalculateTimingStyles){if(fullClassName=node.className+" "+preparationClasses,cacheKey=gcsHashFn(node,fullClassName),timings=computeTimings(node,fullClassName,cacheKey),relativeDelay=timings.maxDelay,maxDelay=Math.max(relativeDelay,0),maxDuration=timings.maxDuration,0===maxDuration)return void close();flags.hasTransitions=timings.transitionDuration>0,flags.hasAnimations=timings.animationDuration>0}if(flags.applyAnimationDelay&&(relativeDelay="boolean"!=typeof options.delay&&truthyTimingValue(options.delay)?parseFloat(options.delay):relativeDelay,maxDelay=Math.max(relativeDelay,0),timings.animationDelay=relativeDelay,delayStyle=getCssDelayStyle(relativeDelay,!0),temporaryStyles.push(delayStyle),node.style[delayStyle[0]]=delayStyle[1]),maxDelayTime=maxDelay*ONE_SECOND,maxDurationTime=maxDuration*ONE_SECOND,options.easing){var easeProp,easeVal=options.easing;flags.hasTransitions&&(easeProp=TRANSITION_PROP+TIMING_KEY,temporaryStyles.push([easeProp,easeVal]),node.style[easeProp]=easeVal),flags.hasAnimations&&(easeProp=ANIMATION_PROP+TIMING_KEY,temporaryStyles.push([easeProp,easeVal]),node.style[easeProp]=easeVal)}timings.transitionDuration&&events.push(TRANSITIONEND_EVENT),timings.animationDuration&&events.push(ANIMATIONEND_EVENT),startTime=Date.now();var timerTime=maxDelayTime+CLOSING_TIME_BUFFER*maxDurationTime,endTime=startTime+timerTime,animationsData=element.data(ANIMATE_TIMER_KEY)||[],setupFallbackTimer=!0;if(animationsData.length){var currentTimerData=animationsData[0];setupFallbackTimer=endTime>currentTimerData.expectedEndTime,setupFallbackTimer?$timeout.cancel(currentTimerData.timer):animationsData.push(close)}if(setupFallbackTimer){var timer=$timeout(onAnimationExpired,timerTime,!1);animationsData[0]={timer:timer,expectedEndTime:endTime},animationsData.push(close),element.data(ANIMATE_TIMER_KEY,animationsData)}events.length&&element.on(events.join(" "),onAnimationProgress),options.to&&(options.cleanupStyles&&registerRestorableStyles(restoreStyles,node,Object.keys(options.to)),applyAnimationToStyles(element,options))}}function onAnimationExpired(){var animationsData=element.data(ANIMATE_TIMER_KEY);if(animationsData){for(var i=1;i<animationsData.length;i++)animationsData[i]();element.removeData(ANIMATE_TIMER_KEY)}}if(!animationClosed){if(!node.parentNode)return void close();var playPause=function(playAnimation){if(animationCompleted)animationPaused&&playAnimation&&(animationPaused=!1,close());else if(animationPaused=!playAnimation,timings.animationDuration){var value=blockKeyframeAnimations(node,animationPaused);animationPaused?temporaryStyles.push(value):removeFromArray(temporaryStyles,value)}},maxStagger=itemIndex>0&&(timings.transitionDuration&&0===stagger.transitionDuration||timings.animationDuration&&0===stagger.animationDuration)&&Math.max(stagger.animationDelay,stagger.transitionDelay);maxStagger?$timeout(triggerAnimationStart,Math.floor(maxStagger*itemIndex*ONE_SECOND),!1):triggerAnimationStart(),runnerHost.resume=function(){playPause(!0)},runnerHost.pause=function(){playPause(!1)}}}var options=initialOptions||{};options.$$prepared||(options=prepareAnimationOptions(copy(options)));var restoreStyles={},node=getDomNode(element);if(!node||!node.parentNode||!$$animateQueue.enabled())return closeAndReturnNoopAnimator();var animationClosed,animationPaused,animationCompleted,runner,runnerHost,maxDelay,maxDelayTime,maxDuration,maxDurationTime,startTime,temporaryStyles=[],classes=element.attr("class"),styles=packageStyles(options),events=[];if(0===options.duration||!$sniffer.animations&&!$sniffer.transitions)return closeAndReturnNoopAnimator();var method=options.event&&isArray(options.event)?options.event.join(" "):options.event,isStructural=method&&options.structural,structuralClassName="",addRemoveClassName="";isStructural?structuralClassName=pendClasses(method,EVENT_CLASS_PREFIX,!0):method&&(structuralClassName=method),options.addClass&&(addRemoveClassName+=pendClasses(options.addClass,ADD_CLASS_SUFFIX)),options.removeClass&&(addRemoveClassName.length&&(addRemoveClassName+=" "),addRemoveClassName+=pendClasses(options.removeClass,REMOVE_CLASS_SUFFIX)),options.applyClassesEarly&&addRemoveClassName.length&&applyAnimationClasses(element,options);var preparationClasses=[structuralClassName,addRemoveClassName].join(" ").trim(),fullClassName=classes+" "+preparationClasses,activeClasses=pendClasses(preparationClasses,ACTIVE_CLASS_SUFFIX),hasToStyles=styles.to&&Object.keys(styles.to).length>0,containsKeyframeAnimation=(options.keyframeStyle||"").length>0;if(!containsKeyframeAnimation&&!hasToStyles&&!preparationClasses)return closeAndReturnNoopAnimator();var cacheKey,stagger;if(options.stagger>0){var staggerVal=parseFloat(options.stagger);stagger={transitionDelay:staggerVal,animationDelay:staggerVal,transitionDuration:0,animationDuration:0}}else cacheKey=gcsHashFn(node,fullClassName),stagger=computeCachedCssStaggerStyles(node,preparationClasses,cacheKey,DETECT_STAGGER_CSS_PROPERTIES);options.$$skipPreparationClasses||$$jqLite.addClass(element,preparationClasses);var applyOnlyDuration;if(options.transitionStyle){var transitionStyle=[TRANSITION_PROP,options.transitionStyle];applyInlineStyle(node,transitionStyle),temporaryStyles.push(transitionStyle)}if(options.duration>=0){applyOnlyDuration=node.style[TRANSITION_PROP].length>0;var durationStyle=getCssTransitionDurationStyle(options.duration,applyOnlyDuration);applyInlineStyle(node,durationStyle),temporaryStyles.push(durationStyle)}if(options.keyframeStyle){var keyframeStyle=[ANIMATION_PROP,options.keyframeStyle];applyInlineStyle(node,keyframeStyle),temporaryStyles.push(keyframeStyle)}var itemIndex=stagger?options.staggerIndex>=0?options.staggerIndex:gcsLookup.count(cacheKey):0,isFirst=0===itemIndex;isFirst&&!options.skipBlocking&&blockTransitions(node,SAFE_FAST_FORWARD_DURATION_VALUE);var timings=computeTimings(node,fullClassName,cacheKey),relativeDelay=timings.maxDelay;maxDelay=Math.max(relativeDelay,0),maxDuration=timings.maxDuration;var flags={};if(flags.hasTransitions=timings.transitionDuration>0,flags.hasAnimations=timings.animationDuration>0,flags.hasTransitionAll=flags.hasTransitions&&"all"==timings.transitionProperty,flags.applyTransitionDuration=hasToStyles&&(flags.hasTransitions&&!flags.hasTransitionAll||flags.hasAnimations&&!flags.hasTransitions),flags.applyAnimationDuration=options.duration&&flags.hasAnimations,flags.applyTransitionDelay=truthyTimingValue(options.delay)&&(flags.applyTransitionDuration||flags.hasTransitions),flags.applyAnimationDelay=truthyTimingValue(options.delay)&&flags.hasAnimations,flags.recalculateTimingStyles=addRemoveClassName.length>0,(flags.applyTransitionDuration||flags.applyAnimationDuration)&&(maxDuration=options.duration?parseFloat(options.duration):maxDuration,flags.applyTransitionDuration&&(flags.hasTransitions=!0,timings.transitionDuration=maxDuration,applyOnlyDuration=node.style[TRANSITION_PROP+PROPERTY_KEY].length>0,temporaryStyles.push(getCssTransitionDurationStyle(maxDuration,applyOnlyDuration))),flags.applyAnimationDuration&&(flags.hasAnimations=!0,timings.animationDuration=maxDuration,temporaryStyles.push(getCssKeyframeDurationStyle(maxDuration)))),0===maxDuration&&!flags.recalculateTimingStyles)return closeAndReturnNoopAnimator();if(null!=options.delay){var delayStyle;"boolean"!=typeof options.delay&&(delayStyle=parseFloat(options.delay),maxDelay=Math.max(delayStyle,0)),flags.applyTransitionDelay&&temporaryStyles.push(getCssDelayStyle(delayStyle)),flags.applyAnimationDelay&&temporaryStyles.push(getCssDelayStyle(delayStyle,!0))}return null==options.duration&&timings.transitionDuration>0&&(flags.recalculateTimingStyles=flags.recalculateTimingStyles||isFirst),maxDelayTime=maxDelay*ONE_SECOND,maxDurationTime=maxDuration*ONE_SECOND,options.skipBlocking||(flags.blockTransition=timings.transitionDuration>0,flags.blockKeyframeAnimation=timings.animationDuration>0&&stagger.animationDelay>0&&0===stagger.animationDuration),options.from&&(options.cleanupStyles&&registerRestorableStyles(restoreStyles,node,Object.keys(options.from)),applyAnimationFromStyles(element,options)),flags.blockTransition||flags.blockKeyframeAnimation?applyBlocking(maxDuration):options.skipBlocking||blockTransitions(node,!1),{$$willAnimate:!0,end:endFn,start:function(){return animationClosed?void 0:(runnerHost={end:endFn,cancel:cancelFn,resume:null,pause:null},runner=new $$AnimateRunner(runnerHost),waitUntilQuiet(start),runner)}}}}]}],$$AnimateCssDriverProvider=["$$animationProvider",function($$animationProvider){function isDocumentFragment(node){return node.parentNode&&11===node.parentNode.nodeType}$$animationProvider.drivers.push("$$animateCssDriver");var NG_ANIMATE_SHIM_CLASS_NAME="ng-animate-shim",NG_ANIMATE_ANCHOR_CLASS_NAME="ng-anchor",NG_OUT_ANCHOR_CLASS_NAME="ng-anchor-out",NG_IN_ANCHOR_CLASS_NAME="ng-anchor-in";this.$get=["$animateCss","$rootScope","$$AnimateRunner","$rootElement","$sniffer","$$jqLite","$document",function($animateCss,$rootScope,$$AnimateRunner,$rootElement,$sniffer,$$jqLite,$document){function filterCssClasses(classes){return classes.replace(/\bng-\S+\b/g,"")}function getUniqueValues(a,b){return isString(a)&&(a=a.split(" ")),isString(b)&&(b=b.split(" ")),a.filter(function(val){return-1===b.indexOf(val)}).join(" ")}function prepareAnchoredAnimation(classes,outAnchor,inAnchor){function calculateAnchorStyles(anchor){var styles={},coords=getDomNode(anchor).getBoundingClientRect();return forEach(["width","height","top","left"],function(key){var value=coords[key];switch(key){case"top":value+=bodyNode.scrollTop;break;case"left":value+=bodyNode.scrollLeft}styles[key]=Math.floor(value)+"px"}),styles}function prepareOutAnimation(){var animator=$animateCss(clone,{addClass:NG_OUT_ANCHOR_CLASS_NAME,delay:!0,from:calculateAnchorStyles(outAnchor)});return animator.$$willAnimate?animator:null}function getClassVal(element){return element.attr("class")||""}function prepareInAnimation(){var endingClasses=filterCssClasses(getClassVal(inAnchor)),toAdd=getUniqueValues(endingClasses,startingClasses),toRemove=getUniqueValues(startingClasses,endingClasses),animator=$animateCss(clone,{to:calculateAnchorStyles(inAnchor),addClass:NG_IN_ANCHOR_CLASS_NAME+" "+toAdd,removeClass:NG_OUT_ANCHOR_CLASS_NAME+" "+toRemove,delay:!0});return animator.$$willAnimate?animator:null}function end(){clone.remove(),outAnchor.removeClass(NG_ANIMATE_SHIM_CLASS_NAME),inAnchor.removeClass(NG_ANIMATE_SHIM_CLASS_NAME)}var clone=jqLite(getDomNode(outAnchor).cloneNode(!0)),startingClasses=filterCssClasses(getClassVal(clone));outAnchor.addClass(NG_ANIMATE_SHIM_CLASS_NAME),inAnchor.addClass(NG_ANIMATE_SHIM_CLASS_NAME),clone.addClass(NG_ANIMATE_ANCHOR_CLASS_NAME),rootBodyElement.append(clone);var animatorIn,animatorOut=prepareOutAnimation();if(!animatorOut&&(animatorIn=prepareInAnimation(),!animatorIn))return end();var startingAnimator=animatorOut||animatorIn;return{start:function(){function endFn(){currentAnimation&&currentAnimation.end()}var runner,currentAnimation=startingAnimator.start();return currentAnimation.done(function(){return currentAnimation=null,!animatorIn&&(animatorIn=prepareInAnimation())?(currentAnimation=animatorIn.start(),currentAnimation.done(function(){currentAnimation=null,end(),runner.complete()}),currentAnimation):(end(),void runner.complete())}),runner=new $$AnimateRunner({end:endFn,cancel:endFn})}}}function prepareFromToAnchorAnimation(from,to,classes,anchors){var fromAnimation=prepareRegularAnimation(from,noop),toAnimation=prepareRegularAnimation(to,noop),anchorAnimations=[];return forEach(anchors,function(anchor){var outElement=anchor.out,inElement=anchor["in"],animator=prepareAnchoredAnimation(classes,outElement,inElement);animator&&anchorAnimations.push(animator)}),fromAnimation||toAnimation||0!==anchorAnimations.length?{start:function(){function endFn(){forEach(animationRunners,function(runner){runner.end()})}var animationRunners=[];fromAnimation&&animationRunners.push(fromAnimation.start()),toAnimation&&animationRunners.push(toAnimation.start()),forEach(anchorAnimations,function(animation){animationRunners.push(animation.start())});var runner=new $$AnimateRunner({end:endFn,cancel:endFn});return $$AnimateRunner.all(animationRunners,function(status){runner.complete(status)}),runner}}:void 0}function prepareRegularAnimation(animationDetails){var element=animationDetails.element,options=animationDetails.options||{};animationDetails.structural&&(options.event=animationDetails.event,options.structural=!0,options.applyClassesEarly=!0,"leave"===animationDetails.event&&(options.onDone=options.domOperation)),options.preparationClasses&&(options.event=concatWithSpace(options.event,options.preparationClasses));var animator=$animateCss(element,options);return animator.$$willAnimate?animator:null}if(!$sniffer.animations&&!$sniffer.transitions)return noop;var bodyNode=$document[0].body,rootNode=getDomNode($rootElement),rootBodyElement=jqLite(isDocumentFragment(rootNode)||bodyNode.contains(rootNode)?rootNode:bodyNode);applyAnimationClassesFactory($$jqLite);return function(animationDetails){return animationDetails.from&&animationDetails.to?prepareFromToAnchorAnimation(animationDetails.from,animationDetails.to,animationDetails.classes,animationDetails.anchors):prepareRegularAnimation(animationDetails)}}]}],$$AnimateJsProvider=["$animateProvider",function($animateProvider){this.$get=["$injector","$$AnimateRunner","$$jqLite",function($injector,$$AnimateRunner,$$jqLite){function lookupAnimations(classes){classes=isArray(classes)?classes:classes.split(" ");for(var matches=[],flagMap={},i=0;i<classes.length;i++){var klass=classes[i],animationFactory=$animateProvider.$$registeredAnimations[klass];animationFactory&&!flagMap[klass]&&(matches.push($injector.get(animationFactory)),flagMap[klass]=!0)}return matches}var applyAnimationClasses=applyAnimationClassesFactory($$jqLite);return function(element,event,classes,options){function applyOptions(){options.domOperation(),applyAnimationClasses(element,options)}function close(){animationClosed=!0,applyOptions(),applyAnimationStyles(element,options)}function executeAnimationFn(fn,element,event,options,onDone){var args;switch(event){case"animate":args=[element,options.from,options.to,onDone];break;case"setClass":args=[element,classesToAdd,classesToRemove,onDone];break;case"addClass":args=[element,classesToAdd,onDone];break;case"removeClass":args=[element,classesToRemove,onDone];break;default:args=[element,onDone]}args.push(options);var value=fn.apply(fn,args);if(value)if(isFunction(value.start)&&(value=value.start()),value instanceof $$AnimateRunner)value.done(onDone);else if(isFunction(value))return value;return noop}function groupEventedAnimations(element,event,options,animations,fnName){var operations=[];return forEach(animations,function(ani){var animation=ani[fnName];animation&&operations.push(function(){var runner,endProgressCb,resolved=!1,onAnimationComplete=function(rejected){resolved||(resolved=!0,(endProgressCb||noop)(rejected),runner.complete(!rejected))};return runner=new $$AnimateRunner({end:function(){onAnimationComplete()},cancel:function(){onAnimationComplete(!0)}}),endProgressCb=executeAnimationFn(animation,element,event,options,function(result){var cancelled=result===!1;onAnimationComplete(cancelled)}),runner})}),operations}function packageAnimations(element,event,options,animations,fnName){var operations=groupEventedAnimations(element,event,options,animations,fnName);if(0===operations.length){var a,b;"beforeSetClass"===fnName?(a=groupEventedAnimations(element,"removeClass",options,animations,"beforeRemoveClass"),b=groupEventedAnimations(element,"addClass",options,animations,"beforeAddClass")):"setClass"===fnName&&(a=groupEventedAnimations(element,"removeClass",options,animations,"removeClass"),b=groupEventedAnimations(element,"addClass",options,animations,"addClass")),a&&(operations=operations.concat(a)),b&&(operations=operations.concat(b))}if(0!==operations.length)return function(callback){var runners=[];return operations.length&&forEach(operations,function(animateFn){runners.push(animateFn())}),runners.length?$$AnimateRunner.all(runners,callback):callback(),function(reject){forEach(runners,function(runner){reject?runner.cancel():runner.end()})}}}var animationClosed=!1;3===arguments.length&&isObject(classes)&&(options=classes,classes=null),options=prepareAnimationOptions(options),classes||(classes=element.attr("class")||"",options.addClass&&(classes+=" "+options.addClass),options.removeClass&&(classes+=" "+options.removeClass));var before,after,classesToAdd=options.addClass,classesToRemove=options.removeClass,animations=lookupAnimations(classes);if(animations.length){var afterFn,beforeFn;"leave"==event?(beforeFn="leave",afterFn="afterLeave"):(beforeFn="before"+event.charAt(0).toUpperCase()+event.substr(1),afterFn=event),"enter"!==event&&"move"!==event&&(before=packageAnimations(element,event,options,animations,beforeFn)),after=packageAnimations(element,event,options,animations,afterFn)}if(before||after){var runner;return{$$willAnimate:!0,end:function(){return runner?runner.end():(close(),runner=new $$AnimateRunner,runner.complete(!0)),runner},start:function(){function onComplete(success){close(success),runner.complete(success)}function endAnimations(cancelled){animationClosed||((closeActiveAnimations||noop)(cancelled),onComplete(cancelled))}if(runner)return runner;runner=new $$AnimateRunner;var closeActiveAnimations,chain=[];return before&&chain.push(function(fn){closeActiveAnimations=before(fn)}),chain.length?chain.push(function(fn){applyOptions(),fn(!0)}):applyOptions(),after&&chain.push(function(fn){closeActiveAnimations=after(fn)}),runner.setHost({end:function(){endAnimations()},cancel:function(){endAnimations(!0)}}),$$AnimateRunner.chain(chain,onComplete),runner}}}}}]}],$$AnimateJsDriverProvider=["$$animationProvider",function($$animationProvider){$$animationProvider.drivers.push("$$animateJsDriver"),this.$get=["$$animateJs","$$AnimateRunner",function($$animateJs,$$AnimateRunner){function prepareAnimation(animationDetails){var element=animationDetails.element,event=animationDetails.event,options=animationDetails.options,classes=animationDetails.classes;return $$animateJs(element,event,classes,options)}return function(animationDetails){if(animationDetails.from&&animationDetails.to){var fromAnimation=prepareAnimation(animationDetails.from),toAnimation=prepareAnimation(animationDetails.to);if(!fromAnimation&&!toAnimation)return;return{start:function(){function endFnFactory(){return function(){forEach(animationRunners,function(runner){runner.end()})}}function done(status){runner.complete(status)}var animationRunners=[];fromAnimation&&animationRunners.push(fromAnimation.start()),toAnimation&&animationRunners.push(toAnimation.start()),$$AnimateRunner.all(animationRunners,done);var runner=new $$AnimateRunner({end:endFnFactory(),cancel:endFnFactory()});return runner}}}return prepareAnimation(animationDetails)}}]}],NG_ANIMATE_ATTR_NAME="data-ng-animate",NG_ANIMATE_PIN_DATA="$ngAnimatePin",$$AnimateQueueProvider=["$animateProvider",function($animateProvider){function makeTruthyCssClassMap(classString){if(!classString)return null;var keys=classString.split(ONE_SPACE),map=Object.create(null);return forEach(keys,function(key){map[key]=!0}),map}function hasMatchingClasses(newClassString,currentClassString){if(newClassString&&currentClassString){var currentClassMap=makeTruthyCssClassMap(currentClassString);return newClassString.split(ONE_SPACE).some(function(className){return currentClassMap[className]})}}function isAllowed(ruleType,element,currentAnimation,previousAnimation){return rules[ruleType].some(function(fn){return fn(element,currentAnimation,previousAnimation)})}function hasAnimationClasses(animation,and){var a=(animation.addClass||"").length>0,b=(animation.removeClass||"").length>0;return and?a&&b:a||b}var PRE_DIGEST_STATE=1,RUNNING_STATE=2,ONE_SPACE=" ",rules=this.rules={skip:[],cancel:[],join:[]};rules.join.push(function(element,newAnimation,currentAnimation){return!newAnimation.structural&&hasAnimationClasses(newAnimation)}),rules.skip.push(function(element,newAnimation,currentAnimation){return!newAnimation.structural&&!hasAnimationClasses(newAnimation)}),rules.skip.push(function(element,newAnimation,currentAnimation){return"leave"==currentAnimation.event&&newAnimation.structural}),rules.skip.push(function(element,newAnimation,currentAnimation){return currentAnimation.structural&&currentAnimation.state===RUNNING_STATE&&!newAnimation.structural}),rules.cancel.push(function(element,newAnimation,currentAnimation){return currentAnimation.structural&&newAnimation.structural}),rules.cancel.push(function(element,newAnimation,currentAnimation){return currentAnimation.state===RUNNING_STATE&&newAnimation.structural}),rules.cancel.push(function(element,newAnimation,currentAnimation){if(currentAnimation.structural)return!1;var nA=newAnimation.addClass,nR=newAnimation.removeClass,cA=currentAnimation.addClass,cR=currentAnimation.removeClass;return isUndefined(nA)&&isUndefined(nR)||isUndefined(cA)&&isUndefined(cR)?!1:hasMatchingClasses(nA,cR)||hasMatchingClasses(nR,cA)}),this.$get=["$$rAF","$rootScope","$rootElement","$document","$$HashMap","$$animation","$$AnimateRunner","$templateRequest","$$jqLite","$$forceReflow",function($$rAF,$rootScope,$rootElement,$document,$$HashMap,$$animation,$$AnimateRunner,$templateRequest,$$jqLite,$$forceReflow){function postDigestTaskFactory(){var postDigestCalled=!1;return function(fn){postDigestCalled?fn():$rootScope.$$postDigest(function(){postDigestCalled=!0,fn()})}}function normalizeAnimationDetails(element,animation){return mergeAnimationDetails(element,animation,{})}function findCallbacks(parent,element,event){var targetNode=getDomNode(element),targetParentNode=getDomNode(parent),matches=[],entries=callbackRegistry[event];return entries&&forEach(entries,function(entry){contains.call(entry.node,targetNode)?matches.push(entry.callback):"leave"===event&&contains.call(entry.node,targetParentNode)&&matches.push(entry.callback)}),matches}function filterFromRegistry(list,matchContainer,matchCallback){var containerNode=extractElementNode(matchContainer);return list.filter(function(entry){var isMatch=entry.node===containerNode&&(!matchCallback||entry.callback===matchCallback);return!isMatch})}function cleanupEventListeners(phase,element){"close"!==phase||element[0].parentNode||$animate.off(element)}function queueAnimation(element,event,initialOptions){function notifyProgress(runner,event,phase,data){runInNextPostDigestOrNow(function(){var callbacks=findCallbacks(parent,element,event);callbacks.length?$$rAF(function(){forEach(callbacks,function(callback){callback(element,phase,data)}),cleanupEventListeners(phase,element)}):cleanupEventListeners(phase,element)}),runner.progress(event,phase,data)}function close(reject){clearGeneratedClasses(element,options),applyAnimationClasses(element,options),applyAnimationStyles(element,options),options.domOperation(),runner.complete(!reject)}var node,parent,options=copy(initialOptions);element=stripCommentsFromElement(element),element&&(node=getDomNode(element),parent=element.parent()),options=prepareAnimationOptions(options);var runner=new $$AnimateRunner,runInNextPostDigestOrNow=postDigestTaskFactory();if(isArray(options.addClass)&&(options.addClass=options.addClass.join(" ")),options.addClass&&!isString(options.addClass)&&(options.addClass=null),isArray(options.removeClass)&&(options.removeClass=options.removeClass.join(" ")),options.removeClass&&!isString(options.removeClass)&&(options.removeClass=null),options.from&&!isObject(options.from)&&(options.from=null),options.to&&!isObject(options.to)&&(options.to=null),!node)return close(),runner;var className=[node.className,options.addClass,options.removeClass].join(" ");if(!isAnimatableClassName(className))return close(),runner;var isStructural=["enter","move","leave"].indexOf(event)>=0,documentHidden=$document[0].hidden,skipAnimations=!animationsEnabled||documentHidden||disabledElementsLookup.get(node),existingAnimation=!skipAnimations&&activeAnimationsLookup.get(node)||{},hasExistingAnimation=!!existingAnimation.state;if(skipAnimations||hasExistingAnimation&&existingAnimation.state==PRE_DIGEST_STATE||(skipAnimations=!areAnimationsAllowed(element,parent,event)),skipAnimations)return documentHidden&&notifyProgress(runner,event,"start"),close(),documentHidden&&notifyProgress(runner,event,"close"),runner;isStructural&&closeChildAnimations(element);var newAnimation={structural:isStructural,element:element,event:event,addClass:options.addClass,removeClass:options.removeClass,close:close,options:options,runner:runner};if(hasExistingAnimation){var skipAnimationFlag=isAllowed("skip",element,newAnimation,existingAnimation);if(skipAnimationFlag)return existingAnimation.state===RUNNING_STATE?(close(),runner):(mergeAnimationDetails(element,existingAnimation,newAnimation),existingAnimation.runner);var cancelAnimationFlag=isAllowed("cancel",element,newAnimation,existingAnimation);if(cancelAnimationFlag)if(existingAnimation.state===RUNNING_STATE)existingAnimation.runner.end();else{if(!existingAnimation.structural)return mergeAnimationDetails(element,existingAnimation,newAnimation),existingAnimation.runner;existingAnimation.close()}else{var joinAnimationFlag=isAllowed("join",element,newAnimation,existingAnimation);if(joinAnimationFlag){if(existingAnimation.state!==RUNNING_STATE)return applyGeneratedPreparationClasses(element,isStructural?event:null,options),event=newAnimation.event=existingAnimation.event,options=mergeAnimationDetails(element,existingAnimation,newAnimation),existingAnimation.runner;normalizeAnimationDetails(element,newAnimation)}}}else normalizeAnimationDetails(element,newAnimation);var isValidAnimation=newAnimation.structural;if(isValidAnimation||(isValidAnimation="animate"===newAnimation.event&&Object.keys(newAnimation.options.to||{}).length>0||hasAnimationClasses(newAnimation)),!isValidAnimation)return close(),clearElementAnimationState(element),runner;var counter=(existingAnimation.counter||0)+1;return newAnimation.counter=counter,markElementAnimationState(element,PRE_DIGEST_STATE,newAnimation),$rootScope.$$postDigest(function(){var animationDetails=activeAnimationsLookup.get(node),animationCancelled=!animationDetails;animationDetails=animationDetails||{};var parentElement=element.parent()||[],isValidAnimation=parentElement.length>0&&("animate"===animationDetails.event||animationDetails.structural||hasAnimationClasses(animationDetails));
if(animationCancelled||animationDetails.counter!==counter||!isValidAnimation)return animationCancelled&&(applyAnimationClasses(element,options),applyAnimationStyles(element,options)),(animationCancelled||isStructural&&animationDetails.event!==event)&&(options.domOperation(),runner.end()),void(isValidAnimation||clearElementAnimationState(element));event=!animationDetails.structural&&hasAnimationClasses(animationDetails,!0)?"setClass":animationDetails.event,markElementAnimationState(element,RUNNING_STATE);var realRunner=$$animation(element,event,animationDetails.options);runner.setHost(realRunner),notifyProgress(runner,event,"start",{}),realRunner.done(function(status){close(!status);var animationDetails=activeAnimationsLookup.get(node);animationDetails&&animationDetails.counter===counter&&clearElementAnimationState(getDomNode(element)),notifyProgress(runner,event,"close",{})})}),runner}function closeChildAnimations(element){var node=getDomNode(element),children=node.querySelectorAll("["+NG_ANIMATE_ATTR_NAME+"]");forEach(children,function(child){var state=parseInt(child.getAttribute(NG_ANIMATE_ATTR_NAME)),animationDetails=activeAnimationsLookup.get(child);if(animationDetails)switch(state){case RUNNING_STATE:animationDetails.runner.end();case PRE_DIGEST_STATE:activeAnimationsLookup.remove(child)}})}function clearElementAnimationState(element){var node=getDomNode(element);node.removeAttribute(NG_ANIMATE_ATTR_NAME),activeAnimationsLookup.remove(node)}function isMatchingElement(nodeOrElmA,nodeOrElmB){return getDomNode(nodeOrElmA)===getDomNode(nodeOrElmB)}function areAnimationsAllowed(element,parentElement,event){var animateChildren,bodyElement=jqLite($document[0].body),bodyElementDetected=isMatchingElement(element,bodyElement)||"HTML"===element[0].nodeName,rootElementDetected=isMatchingElement(element,$rootElement),parentAnimationDetected=!1,elementDisabled=disabledElementsLookup.get(getDomNode(element)),parentHost=jqLite.data(element[0],NG_ANIMATE_PIN_DATA);for(parentHost&&(parentElement=parentHost),parentElement=getDomNode(parentElement);parentElement&&(rootElementDetected||(rootElementDetected=isMatchingElement(parentElement,$rootElement)),parentElement.nodeType===ELEMENT_NODE);){var details=activeAnimationsLookup.get(parentElement)||{};if(!parentAnimationDetected){var parentElementDisabled=disabledElementsLookup.get(parentElement);if(parentElementDisabled===!0&&elementDisabled!==!1){elementDisabled=!0;break}parentElementDisabled===!1&&(elementDisabled=!1),parentAnimationDetected=details.structural}if(isUndefined(animateChildren)||animateChildren===!0){var value=jqLite.data(parentElement,NG_ANIMATE_CHILDREN_DATA);isDefined(value)&&(animateChildren=value)}if(parentAnimationDetected&&animateChildren===!1)break;if(bodyElementDetected||(bodyElementDetected=isMatchingElement(parentElement,bodyElement)),bodyElementDetected&&rootElementDetected)break;parentElement=rootElementDetected||!(parentHost=jqLite.data(parentElement,NG_ANIMATE_PIN_DATA))?parentElement.parentNode:getDomNode(parentHost)}var allowAnimation=(!parentAnimationDetected||animateChildren)&&elementDisabled!==!0;return allowAnimation&&rootElementDetected&&bodyElementDetected}function markElementAnimationState(element,state,details){details=details||{},details.state=state;var node=getDomNode(element);node.setAttribute(NG_ANIMATE_ATTR_NAME,state);var oldValue=activeAnimationsLookup.get(node),newValue=oldValue?extend(oldValue,details):details;activeAnimationsLookup.put(node,newValue)}var activeAnimationsLookup=new $$HashMap,disabledElementsLookup=new $$HashMap,animationsEnabled=null,deregisterWatch=$rootScope.$watch(function(){return 0===$templateRequest.totalPendingRequests},function(isEmpty){isEmpty&&(deregisterWatch(),$rootScope.$$postDigest(function(){$rootScope.$$postDigest(function(){null===animationsEnabled&&(animationsEnabled=!0)})}))}),callbackRegistry={},classNameFilter=$animateProvider.classNameFilter(),isAnimatableClassName=classNameFilter?function(className){return classNameFilter.test(className)}:function(){return!0},applyAnimationClasses=applyAnimationClassesFactory($$jqLite),contains=window.Node.prototype.contains||function(arg){return this===arg||!!(16&this.compareDocumentPosition(arg))},$animate={on:function(event,container,callback){var node=extractElementNode(container);callbackRegistry[event]=callbackRegistry[event]||[],callbackRegistry[event].push({node:node,callback:callback}),jqLite(container).on("$destroy",function(){var animationDetails=activeAnimationsLookup.get(node);animationDetails||$animate.off(event,container,callback)})},off:function(event,container,callback){if(1!==arguments.length||angular.isString(arguments[0])){var entries=callbackRegistry[event];entries&&(callbackRegistry[event]=1===arguments.length?null:filterFromRegistry(entries,container,callback))}else{container=arguments[0];for(var eventType in callbackRegistry)callbackRegistry[eventType]=filterFromRegistry(callbackRegistry[eventType],container)}},pin:function(element,parentElement){assertArg(isElement(element),"element","not an element"),assertArg(isElement(parentElement),"parentElement","not an element"),element.data(NG_ANIMATE_PIN_DATA,parentElement)},push:function(element,event,options,domOperation){return options=options||{},options.domOperation=domOperation,queueAnimation(element,event,options)},enabled:function(element,bool){var argCount=arguments.length;if(0===argCount)bool=!!animationsEnabled;else{var hasElement=isElement(element);if(hasElement){var node=getDomNode(element),recordExists=disabledElementsLookup.get(node);1===argCount?bool=!recordExists:disabledElementsLookup.put(node,!bool)}else bool=animationsEnabled=!!element}return bool}};return $animate}]}],$$AnimationProvider=["$animateProvider",function($animateProvider){function setRunner(element,runner){element.data(RUNNER_STORAGE_KEY,runner)}function removeRunner(element){element.removeData(RUNNER_STORAGE_KEY)}function getRunner(element){return element.data(RUNNER_STORAGE_KEY)}var NG_ANIMATE_REF_ATTR="ng-animate-ref",drivers=this.drivers=[],RUNNER_STORAGE_KEY="$$animationRunner";this.$get=["$$jqLite","$rootScope","$injector","$$AnimateRunner","$$HashMap","$$rAFScheduler",function($$jqLite,$rootScope,$injector,$$AnimateRunner,$$HashMap,$$rAFScheduler){function sortAnimations(animations){function processNode(entry){if(entry.processed)return entry;entry.processed=!0;var elementNode=entry.domNode,parentNode=elementNode.parentNode;lookup.put(elementNode,entry);for(var parentEntry;parentNode;){if(parentEntry=lookup.get(parentNode)){parentEntry.processed||(parentEntry=processNode(parentEntry));break}parentNode=parentNode.parentNode}return(parentEntry||tree).children.push(entry),entry}function flatten(tree){var i,result=[],queue=[];for(i=0;i<tree.children.length;i++)queue.push(tree.children[i]);var remainingLevelEntries=queue.length,nextLevelEntries=0,row=[];for(i=0;i<queue.length;i++){var entry=queue[i];0>=remainingLevelEntries&&(remainingLevelEntries=nextLevelEntries,nextLevelEntries=0,result.push(row),row=[]),row.push(entry.fn),entry.children.forEach(function(childEntry){nextLevelEntries++,queue.push(childEntry)}),remainingLevelEntries--}return row.length&&result.push(row),result}var i,tree={children:[]},lookup=new $$HashMap;for(i=0;i<animations.length;i++){var animation=animations[i];lookup.put(animation.domNode,animations[i]={domNode:animation.domNode,fn:animation.fn,children:[]})}for(i=0;i<animations.length;i++)processNode(animations[i]);return flatten(tree)}var animationQueue=[],applyAnimationClasses=applyAnimationClassesFactory($$jqLite);return function(element,event,options){function getAnchorNodes(node){var SELECTOR="["+NG_ANIMATE_REF_ATTR+"]",items=node.hasAttribute(NG_ANIMATE_REF_ATTR)?[node]:node.querySelectorAll(SELECTOR),anchors=[];return forEach(items,function(node){var attr=node.getAttribute(NG_ANIMATE_REF_ATTR);attr&&attr.length&&anchors.push(node)}),anchors}function groupAnimations(animations){var preparedAnimations=[],refLookup={};forEach(animations,function(animation,index){var element=animation.element,node=getDomNode(element),event=animation.event,enterOrMove=["enter","move"].indexOf(event)>=0,anchorNodes=animation.structural?getAnchorNodes(node):[];if(anchorNodes.length){var direction=enterOrMove?"to":"from";forEach(anchorNodes,function(anchor){var key=anchor.getAttribute(NG_ANIMATE_REF_ATTR);refLookup[key]=refLookup[key]||{},refLookup[key][direction]={animationID:index,element:jqLite(anchor)}})}else preparedAnimations.push(animation)});var usedIndicesLookup={},anchorGroups={};return forEach(refLookup,function(operations,key){var from=operations.from,to=operations.to;if(!from||!to){var index=from?from.animationID:to.animationID,indexKey=index.toString();return void(usedIndicesLookup[indexKey]||(usedIndicesLookup[indexKey]=!0,preparedAnimations.push(animations[index])))}var fromAnimation=animations[from.animationID],toAnimation=animations[to.animationID],lookupKey=from.animationID.toString();if(!anchorGroups[lookupKey]){var group=anchorGroups[lookupKey]={structural:!0,beforeStart:function(){fromAnimation.beforeStart(),toAnimation.beforeStart()},close:function(){fromAnimation.close(),toAnimation.close()},classes:cssClassesIntersection(fromAnimation.classes,toAnimation.classes),from:fromAnimation,to:toAnimation,anchors:[]};group.classes.length?preparedAnimations.push(group):(preparedAnimations.push(fromAnimation),preparedAnimations.push(toAnimation))}anchorGroups[lookupKey].anchors.push({out:from.element,"in":to.element})}),preparedAnimations}function cssClassesIntersection(a,b){a=a.split(" "),b=b.split(" ");for(var matches=[],i=0;i<a.length;i++){var aa=a[i];if("ng-"!==aa.substring(0,3))for(var j=0;j<b.length;j++)if(aa===b[j]){matches.push(aa);break}}return matches.join(" ")}function invokeFirstDriver(animationDetails){for(var i=drivers.length-1;i>=0;i--){var driverName=drivers[i],factory=$injector.get(driverName),driver=factory(animationDetails);if(driver)return driver}}function beforeStart(){element.addClass(NG_ANIMATE_CLASSNAME),tempClasses&&$$jqLite.addClass(element,tempClasses),prepareClassName&&($$jqLite.removeClass(element,prepareClassName),prepareClassName=null)}function updateAnimationRunners(animation,newRunner){function update(element){var runner=getRunner(element);runner&&runner.setHost(newRunner)}animation.from&&animation.to?(update(animation.from.element),update(animation.to.element)):update(animation.element)}function handleDestroyedElement(){var runner=getRunner(element);!runner||"leave"===event&&options.$$domOperationFired||runner.end()}function close(rejected){element.off("$destroy",handleDestroyedElement),removeRunner(element),applyAnimationClasses(element,options),applyAnimationStyles(element,options),options.domOperation(),tempClasses&&$$jqLite.removeClass(element,tempClasses),element.removeClass(NG_ANIMATE_CLASSNAME),runner.complete(!rejected)}options=prepareAnimationOptions(options);var isStructural=["enter","move","leave"].indexOf(event)>=0,runner=new $$AnimateRunner({end:function(){close()},cancel:function(){close(!0)}});if(!drivers.length)return close(),runner;setRunner(element,runner);var classes=mergeClasses(element.attr("class"),mergeClasses(options.addClass,options.removeClass)),tempClasses=options.tempClasses;tempClasses&&(classes+=" "+tempClasses,options.tempClasses=null);var prepareClassName;return isStructural&&(prepareClassName="ng-"+event+PREPARE_CLASS_SUFFIX,$$jqLite.addClass(element,prepareClassName)),animationQueue.push({element:element,classes:classes,event:event,structural:isStructural,options:options,beforeStart:beforeStart,close:close}),element.on("$destroy",handleDestroyedElement),animationQueue.length>1?runner:($rootScope.$$postDigest(function(){var animations=[];forEach(animationQueue,function(entry){getRunner(entry.element)?animations.push(entry):entry.close()}),animationQueue.length=0;var groupedAnimations=groupAnimations(animations),toBeSortedAnimations=[];forEach(groupedAnimations,function(animationEntry){toBeSortedAnimations.push({domNode:getDomNode(animationEntry.from?animationEntry.from.element:animationEntry.element),fn:function(){animationEntry.beforeStart();var startAnimationFn,closeFn=animationEntry.close,targetElement=animationEntry.anchors?animationEntry.from.element||animationEntry.to.element:animationEntry.element;if(getRunner(targetElement)){var operation=invokeFirstDriver(animationEntry);operation&&(startAnimationFn=operation.start)}if(startAnimationFn){var animationRunner=startAnimationFn();animationRunner.done(function(status){closeFn(!status)}),updateAnimationRunners(animationEntry,animationRunner)}else closeFn()}})}),$$rAFScheduler(sortAnimations(toBeSortedAnimations))}),runner)}}]}],ngAnimateSwapDirective=["$animate","$rootScope",function($animate,$rootScope){return{restrict:"A",transclude:"element",terminal:!0,priority:600,link:function(scope,$element,attrs,ctrl,$transclude){var previousElement,previousScope;scope.$watchCollection(attrs.ngAnimateSwap||attrs["for"],function(value){previousElement&&$animate.leave(previousElement),previousScope&&(previousScope.$destroy(),previousScope=null),(value||0===value)&&(previousScope=scope.$new(),$transclude(previousScope,function(element){previousElement=element,$animate.enter(element,null,$element)}))})}}}];angular.module("ngAnimate",[]).directive("ngAnimateSwap",ngAnimateSwapDirective).directive("ngAnimateChildren",$$AnimateChildrenDirective).factory("$$rAFScheduler",$$rAFSchedulerFactory).provider("$$animateQueue",$$AnimateQueueProvider).provider("$$animation",$$AnimationProvider).provider("$animateCss",$AnimateCssProvider).provider("$$animateCssDriver",$$AnimateCssDriverProvider).provider("$$animateJs",$$AnimateJsProvider).provider("$$animateJsDriver",$$AnimateJsDriverProvider)}(window,window.angular),function(angular,document,window,undefined){"use strict";angular.module("vesparny.fancyModal",[]).provider("$fancyModal",function(){var defaults=this.defaults={templateUrl:"",template:"<div></div>",resolve:{},controller:"",scope:"",showCloseButton:!0,closeOnEscape:!0,closeOnOverlayClick:!0,overlay:!0,themeClass:"",openingClass:"fancymodal-content-opening",closingClass:"fancymodal-content-closing",openingOverlayClass:"fancymodal-overlay-opening",closingOverlayClass:"fancymodal-overlay-closing",bodyClass:"fancymodal-open"};this.setDefaults=function(options){angular.extend(this.defaults,options)},this.$get=["$controller","$timeout","$rootScope","$injector","$compile","$http","$templateCache","$window","$document","$q",function($controller,$timeout,$rootScope,$injector,$compile,$http,$templateCache,$window,$document,$q){function onKeydown(event){27===event.keyCode&&close()}function getScrollBarWidth(){var scrollDiv=document.createElement("div");scrollDiv.style.cssText="width: 99px; height: 99px; overflow: scroll; position: absolute; top: -9999px;",document.body.appendChild(scrollDiv);var size=scrollDiv.offsetWidth-scrollDiv.clientWidth;return document.body.removeChild(scrollDiv),size}function hasScrollbars(){return $body[0].scrollHeight>$window.innerHeight}function getTemplatePromise(options){var deferred=$q.defer();return options.templateUrl?$http.get(options.templateUrl,{cache:$templateCache}).then(function(result){deferred.resolve(result.data)}):deferred.resolve(options.template),deferred.promise}function getResolvePromises(resolves){var promisesArr=[];return angular.forEach(resolves,function(value){promisesArr.push($q.when($injector.invoke(value)))}),promisesArr}function cleanUp($modal){var elementId=$modal.attr("id");$modal.scope().$destroy(),$modal.remove(),isClosing=!1,0===modalCounter&&($body.removeClass("fancymodal-open"),$html.css("margin-right","")),$rootScope.$emit("$fancyModal.closed",elementId)}function closeModal(modal){var $modal=angular.element(modal),options=$modal.data("options");if(isClosing=!0,$modal.unbind("click"),1===modalCounter&&$document.unbind("keydown"),modalCounter-=1,animationEndSupport){var content=angular.element(modal.children[0]);if(options.overlay){var overlay=angular.element(modal.children[0]);overlay.addClass(options.closingOverlayClass),content=angular.element(modal.children[1])}content.unbind(animationEndEvent).bind(animationEndEvent,function(){content.remove(),cleanUp($modal)}).removeClass(options.openingClass).addClass(options.closingClass)}else cleanUp($modal)}function closeAll(){var modals=document.querySelectorAll(".fancymodal");angular.forEach(modals,function(modal){closeModal(modal)})}function open(opts){function closeByAction(event){var overlay=angular.element(event.target).hasClass("fancymodal-overlay"),closeBtn=angular.element(event.target).hasClass("fancymodal-close");(overlay&&options.closeOnOverlayClick||closeBtn)&&close(modal.attr("id"))}function execOpen($modal){var htmlTemplate,defer=$q.defer();return getTemplatePromise(options).then(function(template){return htmlTemplate=template,$q.all(getResolvePromises(options.resolve))}).then(function(locals){if(isClosing)defer.reject();else{var ctrl,data={},resolveCounter=0;angular.forEach(options.resolve,function(value,key){data[key]=locals[resolveCounter],resolveCounter+=1}),scope.$modal=$modal,data.$scope=scope,options.controller&&(ctrl=$controller(options.controller,data)),contentData.append($compile(htmlTemplate)(scope)),$rootScope.$emit("$fancyModal.opened",modal),defer.resolve()}}),defer.promise}var options=angular.copy(defaults);opts=opts||{},angular.extend(options,opts),modalCounter+=1,incrementalId+=1,$body.addClass(options.bodyClass),hasScrollbars()&&$html.css("margin-right",getScrollBarWidth()+"px");var scope=(options.scope||$rootScope).$new(),modal=angular.element('<div id="fancymodal-'+incrementalId+'" class="fancymodal"></div>').addClass(options.themeClass);modal.data("options",options);var content=angular.element("<div>").addClass("fancymodal-content");if(options.showCloseButton){var closeButton=angular.element("<div>").addClass("fancymodal-close");content.append(closeButton)}options.closeOnEscape&&$document.bind("keydown",onKeydown);var contentData=angular.element("<div>").addClass("fancymodal-data");if(options.overlay){var overlay=angular.element("<div>").addClass("fancymodal-overlay").addClass(options.openingOverlayClass);modal.append(overlay)}content.append(contentData),content.addClass(options.openingClass),modal.bind("click",closeByAction),modal.append(content),$body.append($compile(modal)(scope));var id="fancymodal-"+incrementalId,$modal={id:id,close:function(){return close(id)}},openPromise=execOpen($modal);return angular.extend({opened:openPromise},$modal)}function close(id){var modal=document.getElementById(id);modal?closeModal(modal):closeAll()}var modalCounter=0,incrementalId=0,isClosing=!1,style=(document.body||document.documentElement).style,animationEndSupport=angular.isDefined(style.animation)||angular.isDefined(style.WebkitAnimation)||angular.isDefined(style.MozAnimation)||angular.isDefined(style.MsAnimation)||angular.isDefined(style.OAnimation),animationEndEvent="animationend webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend",$body=angular.element(document).find("body"),$html=angular.element(document).find("html");return{open:function(options){return open(options)},close:function(id){return close(id)},getDefaults:function(){return angular.copy(defaults)}}}]}).directive("fancyModal",["$fancyModal",function($fancyModal){return{restrict:"A",link:function(scope,element,attrs){var modal,options;element.on(attrs.trigger||"click",function(){options=$fancyModal.getDefaults(),angular.forEach(Object.keys(options),function(key){angular.isDefined(attrs[key])&&("true"===attrs[key]?options[key]=!0:"false"===attrs[key]?options[key]=!1:options[key]=attrs[key])}),modal=$fancyModal.open(options)}),scope.$on("$destroy",function(){modal?modal.opened.then(function(){modal.close(),modal=null}):modal=null,options=null})}}}])}(angular,document,window);var app=angular.module("app",["ngRoute","ngStorage","satellizer","ngAnimate","vesparny.fancyModal"]);app.value("API","https://portaldev.nightwatch24.com:44433/"),app.config(["$routeProvider","$locationProvider","$authProvider","$httpProvider",function($routeProvider,$locationProvider,$authProvider){$authProvider.loginUrl="https://portaldev.nightwatch24.com:44433/api/login",$authProvider.tokenName="access_token",$routeProvider.when("/",{templateUrl:"assets/partials/dashboard.html",controller:"dashboardController",activetab:"dashboard"}).when("/login",{templateUrl:"assets/partials/login.html",controller:"loginController as login"}).when("/register",{templateUrl:"assets/partials/register.html",controller:"registerController"}).when("/register/:verifyAccount",{templateUrl:"assets/partials/verifyAccount.html",controller:"verifyController"}).when("/create-name-password",{templateUrl:"assets/partials/create-name-password.html"}).when("/add-phone",{templateUrl:"assets/partials/add-phone.html",controller:"phoneController as phone"}).when("/primary-address",{templateUrl:"assets/partials/primary-address.html"}).when("/billing-address",{templateUrl:"assets/partials/billing-address.html"}).when("/create-subaccount",{templateUrl:"assets/partials/create-subaccount.html"}).when("/create-group",{templateUrl:"assets/partials/create-group.html"}).when("/add-device",{templateUrl:"assets/partials/add-device.html",controller:"deviceController as device"}).when("/add-horse",{templateUrl:"assets/partials/add-horse.html",controller:"horseController"}).when("/notification-settings",{templateUrl:"assets/partials/notification-settings.html"}).when("/user",{templateUrl:"assets/partials/user.html",controller:"userController as user"}).when("/devices",{templateUrl:"assets/partials/devices.html",controller:"deviceController as device",activetab:"devices"}).when("/horses",{templateUrl:"assets/partials/horses.html",controller:"horseController as horse",activetab:"horses"}).when("/horses/horse/:id",{templateUrl:"assets/partials/horse.html",controller:"horseController as horse",activetab:"horses"}).when("/horses/new",{templateUrl:"assets/partials/newHorse.html",controller:"horseController as horse",activetab:"horses"}).otherwise({redirectTo:"/login"})}]),app.run(["$http",function($http){$http.defaults.headers.common["X-Requested-With"]="XMLHttpRequest",$http.defaults.headers.common.Accept="application/json;odata=verbose"}]),app.factory("authenticate",function(){var API="https://portaldev.nightwatch24.com:44433/";return API}),app.factory("horseService",["$http",function($http){var API="https://portaldev.nightwatch24.com:44433/",getHorses={async:function(){var horses=$http.get(API+"/api/horse").then(function(response){return response.data});return horses}};return getHorses}]),app.factory("countries",["$http","API",function($http,API){var API=API,countries={};return countries.getCountries=function(){return $http.get(API+"api/country/optList")},countries}]),app.controller("dashboardController",["$scope","$http","$localStorage","$location","API","$route",function($scope,$http,$localStorage,$location,API,$route){var API=API;$scope.$route=$route,$scope.sortType="edi_score",$scope.sortReverse=!0;var getHorses=function(){$http.get(API+"/api/horse").then(function(res){$scope.horses=res.data,console.log($scope.horses),$scope.serialNumber="",$scope.nickName=""})["catch"](function(err){if(401===err.status||null==localStorage)throw $location.path("/login"),err;console.log("all good")})["finally"](function(){$scope.loading=!1})};getHorses(),$scope.ediColor=function(horse){return horse.edi_score<4?"label-success":horse.edi_score<6?"label-warning":"label-danger"},$scope.loading=!0,$scope.getHorse=function(horse){$scope.activeHorse=horse,console.log(horse),console.log($scope.activeHorse),$http.get(API+"/api/horse/"+horse.id+"/metric/latest").then(function(res){$scope.metrics=res.data,console.log($scope.metrics)})["catch"](function(err){console.log(err)})["finally"](function(){$scope.loading=!1})}}]),app.controller("deviceController",["$scope","$http","$localStorage","$location","API","$route","$fancyModal","$rootScope",function($scope,$http,$localStorage,$location,API,$route,$fancyModal,$rootScope){var API=API;$scope.regex=/^[a-zA-Z0-9]{12}?/,$scope.$route=$route;var vm=this;vm.message={status:!1,text:""},vm.getDevice=function(device){vm.whichDevice=vm.devices[device],console.log(vm.whichDevice)};var hideAlert=function(){$scope.$apply(function(){vm.message.status=!vm.message.status,console.log(vm.message.status)})};vm.getDevices=function(){vm.loadingDevice=!0,$http.get(API+"api/device").then(function(res){vm.devices=res.data,console.log(vm.devices)})["catch"](function(err){throw 401===err.status&&$location.path("/login"),err})["finally"](function(){vm.loadingDevice=!1})},vm.getDevices(),vm.successMessage=!1,vm.addDevice=function(){vm.devices=[],$http.post(API+"api/device",{serialNumber:vm.serialNumber,nickName:vm.nickName})["catch"](function(err){400==err.status&&(vm.message={status:"error",text:err.data.errors[0]},vm.getDevices())}).then(function(res){201==res.status&&(vm.message={status:!0,text:"Device succesfully added"},vm.serialNumber="",vm.nickName="",vm.getDevices())})["finally"](function(res){setTimeout(hideAlert,6e3)})},vm.updateDevice=function(){$http.put(API+"api/device/"+vm.whichDevice.id,{serialNumber:vm.whichDevice.serial_number,nickName:vm.whichDevice.nick_name})["catch"](function(err){throw err}).then(function(res){getDevices()})},vm.modal=function(device){vm.getDevice(device),$fancyModal.open({scope:$scope,templateUrl:"assets/partials/deleteDevice.html"})},vm.removeDevice=function(device){$http["delete"](API+"api/device/"+vm.whichDevice.id)["catch"](function(err){throw err}).then(function(res){$fancyModal.close(),vm.loadingDevice=!0,vm.devices=[],vm.getDevices(),vm.message={status:!0,text:"Device successfully removed"}})["finally"](function(){setTimeout(hideAlert,6e3)})}}]),app.controller("groupController",["$scope",function($scope){$scope.group=!1,$scope.groups=[],$scope.assignGroupLink="",$scope.assignGroup=function(){$scope.group?($scope.group=!1,this.innerHTML="Don't Assign Address To Group"):($scope.group=!0,this.innerHTML="Don't Assign Address To Group")},$scope.addGroup=function(){$scope.groups.push({groupName:$scope.groupName,address:$scope.address,address2:$scope.address2,city:$scope.city,state:$scope.state,country:$scope.country}),$scope.groupName="",$scope.address="",$scope.address2="",$scope.city="",$scope.state="",$scope.country="",$scope.group=!1}}]),app.controller("horseController",["$scope","$http","$localStorage","$location","API","$route","$routeParams","$rootScope",function($scope,$http,$localStorage,$location,API,$route,$routeParams,$rootScope){var API=API,vm=this;vm.loadingHorse=!0,vm.successMessage=!1,$scope.$route=$route,$scope.viewHorse=function(horse){$location.path("/horses/horse/"+horse),console.log(horse),vm.loadingHorse=!0},vm.getHorses=function(){$http.get(API+"api/horse").then(function(res){vm.horses=res.data,vm.whichHorse=vm.horses[$routeParams.id]})["catch"](function(err){401===err.status&&$location.path("/login")})["finally"](function(){vm.loading=!1,vm.loadingHorse=!1,console.log(vm.horses)})},vm.getHorses(),vm.addHorse=function(){$http.post(API+"api/horse",{registeredName:vm.registeredName,nickName:vm.nickName,sex:vm.sex,breed:vm.breed}).then(function(res){$scope.horses=res,console.log(res),$scope.horseForm=null},function(err){console.log(err)})["finally"](function(){$location.path("/horses")})},vm.updateHorse=function(){$http.put(API+"api/horse/"+vm.horses[horse].id,{registeredName:vm.whichHorse.registered_name,nickName:vm.whichHorse.nick_name,sex:vm.whichHorse.sex,breed:vm.whichHorse.breed})["catch"](function(err){throw err}).then(function(){console.log("horse updated"),vm.successMessage=!0})},vm.removeHorse=function(horse){$http["delete"](API+"api/horse/"+horse).then(function(){$location.path("/horses")})},$scope.backBtn=function(){$location.path("/horses"),$scope.back=!1}}]),app.controller("loginController",["$scope","$auth","$location","API",function($scope,$auth,$location,API){var vm=this;$scope.loggingIn=!1,vm.login=function(){$scope.loggingIn=!0;var credentials={username:vm.username,password:vm.password};$auth.login(credentials).then(function(data){$scope.loggingIn=!0,$location.path("/")})["catch"](function(err){401==err.status&&($scope.invalidPassword=!0)})["finally"](function(){$scope.loggingIn=!1})}}]),app.controller("mainController",["$scope","$http","$localStorage","$location","authenticate","API",function($scope,$http,$localStorage,$location,authenticate,API){console.log(API),$scope.getData=function(){$http.get(API+"api/account",{}).then(function(res){$scope.userData=res.data,console.log($scope.userData)})},$scope.toggleMenu=function(){$scope.expanded=!$scope.expanded},$scope.userMenu=function(){$scope.userExpanded=!$scope.userExpanded,console.log("click")},$scope.signOut=function(){localStorage.clear(),$location.path("/login"),console.log("sign out")}}]),app.controller("phoneController",["$http","countries","API","$location",function($http,countries,API,$location){var API=API,vm=this;countries.getCountries().then(function(res){vm.countries=res.data}),vm.getPhones=function(){$http.get(API+"api/account/contact/phones").then(function(res){vm.phones=res.data,console.log(res.data),vm.loadingPhones=!0})["finally"](function(){vm.loadingPhones=!1})},vm.getPhones(),vm.addPhone=function(){$http.post(API+"api/account/contact/phones",{countryCode:vm.code,areaCode:vm.areaCode,number:vm.number}).then(function(){console.log("success"),vm.successMessage=!0,vm.errorMessage=!1,vm.code="",vm.areaCode="",vm.number=""})["catch"](function(err){401==err.status?$locaiton.path("/login"):422==err.status&&(vm.errorMessage=!0,vm.successMessage=!1,vm.errors=err.data.errors)})["finally"](function(){vm.getPhones()})},vm.deletePhone=function(phone){$http["delete"](phone.uri).then(function(res){$http.get(API+"api/account/contact/phones"),console.log("delete phone")})["catch"](function(err){throw err})["finally"](function(){vm.getPhones(),console.log("phone removed")})}}]),app.controller("registerController",["$scope","$http","API",function($scope,$http,API){var API=API;$scope.register=function(){$http.post(API+"account/register",{username:$scope.username,email:$scope.email,salutation:$scope.salutation,firstName:$scope.firstName,lastName:$scope.lastName,password:$scope.password,password2:$scope.password2}).then(function(res){console.log(res)})}}]),app.controller("userController",["$scope","$http","API","$location","countries",function($scope,$http,API,$location,countries){var API=API,vm=this;countries.getCountries().then(function(res){vm.countries=res.data}),vm.user={},$http.get(API+"/api/account/contact").then(function(res){vm.profile=res.data[0],console.log(vm.profile)})["catch"](function(err){err&&$location.path("/login")})["finally"](function(){}),vm.updateProfile=function(){$http.put(API+"/api/account/contact",{title:vm.profile.title,first_name:vm.profile.first_name,last_name:vm.profile.last_name})["catch"](function(err){throw err})["finally"](function(){alert("success")})};var getEmails=function(){$http.get(API+"/api/account/contact/emails").then(function(res){vm.emails=res.data,console.log(vm.emails),$scope.loadingEmails=!0})["catch"](function(err){401===err.status&&$location.path("/login")})["finally"](function(){$scope.loadingEmails=!1})};getEmails(),vm.addEmail=function(){$http.post(API+"/api/account/contact/emails",{emailAddress:vm.emailAddress}).then(function(){vm.loadingEmails=!0})["catch"](function(err){throw err})["finally"](function(){getEmails()})};vm.deleteEmail=function(email){$http["delete"](email.uri).then(function(){getEmails()})},$scope.showUserForm=function(){$scope.skipButton=!1,$scope.AddUserForm=!0,console.log("click")}}]),app.controller("verifyController",["$routeParams","$http","$location",function($routeParams,$http,$location){var vm=this;$http.get($routeParams)["catch"](function(err){vm.message="Sorry that is not a valid registration link"}).then(function(){$location.path("/add-phone"),
console.log("Account successfully verified :)")})}]);